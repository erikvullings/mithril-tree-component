{"version":3,"sources":["node_modules/mithril/mithril.mjs","../node_modules/.registry.npmjs.org/style-inject/0.3.0/node_modules/style-inject/dist/style-inject.es.js","../src/utils/utils.ts","../src/tree-item.ts","../src/tree-container.ts","src/components/tree-view.ts","src/components/layout.ts","src/app.ts"],"names":["Vnode","tag","key","attrs0","children0","text","dom","attrs","children","domSize","undefined","state","events","instance","normalize","node","Array","isArray","normalizeChildren","input","i","length","hyperscriptVnode","attrs1","children1","arguments","start","push","selectorParser","selectorCache","hasOwn","hasOwnProperty","isEmpty","object","call","compileSelector","selector","match","classes","exec","type","value","id","attrValue","replace","className","join","execSelector","vnode","hasClass","class","newAttrs","String","hyperscript","view","Error","apply","trust","html","fragment","vnode2","m","PromisePolyfill","executor","TypeError","self","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","list","shouldAbsorb","execute","then","console","error","retry","executeOnce","bind","e","runs","run","fn","onerror","prototype","onFulfilled","onRejection","resolveNext","rejectNext","handle","callback","next","promise","resolve","reject","catch","finally","reason","all","total","count","values","consume","race","window","Promise","global","buildQueryString","Object","toString","args","destructure","encodeURIComponent","_12","$window","callbackCount","oncompletion","makeRequest","factory","url","promise0","data","background","complete","wrap","then0","hasHeader","name","headers","test","interpolate","assemble","m0","querystring","indexOf","request","method","toUpperCase","useBody","assumeJSON","serialize","JSON","FormData","stringify","xhr","XMLHttpRequest","aborted","_abort","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","responseType","config","onreadystatechange","readyState","success","status","response","responseText","extract","parse","code","send","jsonp","callbackName","Math","round","random","script","document","createElement","parentNode","removeChild","src","callbackKey","documentElement","appendChild","setCompletionCallback","requestService","coreRenderer","$doc","redraw0","nameSpace","svg","math","getNameSpace","vnode3","xmlns","checkState","original","callHook","activeElement","createNodes","parent","vnodes","end","hooks","nextSibling","ns","createNode","initLifecycle","createText","createTextNode","insertNode","createHTML","createFragment","createDocumentFragment","children3","firstChild","childNodes","attrs2","is","element","createElementNS","setAttrs","setAttr","contenteditable","setContentEditable","textContent","setLateSelectAttrs","selectedIndex","normalized","createComponent","initComponent","sentinel","create","$$reentrantLock$$","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","match0","temp","innerHTML","child","updateNodes","old","removeNodes","oldStart","isOldKeyed","isKeyed","oldEnd","o","v","oe","ve","topSibling","updateNode","getNextSibling","toFragment","originalNextSibling","map","lisIndices","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","makeLisIndices","a","p","u","slice","result","il","j","c","commonLength","removeNode","oldTag","shouldNotUpdate","onbeforeupdate","force","updateLifecycle","updateText","nodeValue","updateHTML","updateFragment","updateElement","updateAttrs","val","removeAttr","updateComponent","count0","insertBefore","content","expected","called","onbeforeremove","continuation","onremove","isLifecycleMethod","isFormAttribute","attr","updateEvent","setAttributeNS","updateStyle","hasPropertyKey","setAttribute","removeAttribute","nsLastIndex","uppercaseRegex","toLowerCase","capital","normalizeKey","style","cssText","setProperty","removeProperty","EventDict","removeEventListener","addEventListener","source","oninit","oncreate","onupdate","handleEvent","ev","handler0","currentTarget","redraw","preventDefault","stopPropagation","render","active","namespace","namespaceURI","focus","setRedraw","throttle","pending","requestAnimationFrame","_15","throttleMock","renderService","callbacks","rendering","unsubscribe","index","splice","sync","subscribe","redrawService","_20","redrawService0","root","component","run0","mount","parseQueryString","string","charAt","entries","split","data2","counters","entry","key2","decodeURIComponent","value0","levels","cursor","pop","j0","level","nextLevel","isNumber","isNaN","parseInt","isValue","coreRouter","supportsPushState","asyncId","history","pushState","callAsync0","fragment0","data1","location","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","key1","hashParams","router","prefix","type2","options","match1","token","query","hash","title","onpopstate","replaceState","href","defineRoutes","routes","resolveRoute","getPath","params","pathname","k","route0","matcher","RegExp","keys","debounceAsync","onhashchange","_24","routeService","render1","attrs3","currentPath","lastUpdate","route","defaultRoute","run1","redraw3","bail","setPath","payload","update","routeResolver","comp","v0","onmatch","resolved","set","data0","get","link","vnode5","onclick","ctrlKey","metaKey","shiftKey","which","getAttribute","args0","param","key0","_31","version","_m","_trust","_fragment","_mount","_route","_render","_redraw","_request","_jsonp","_parseQueryString","_buildQueryString","_version","_vnode","_PromisePolyfill","css","uuid4","r","move","arr","from","to","TreeButton","_a","_b","buttonName","ref","insertAt","head","getElementsByTagName","styleSheet","TreeItemIdPrefix","TreeItem","tiState","isOpen","_hasChildren","toggle","treeItem","isExpanded","item","dragOptions","selectedId","width","treeItemView","_findChildren","_isExpanded","_addChildren","_depth","onSelect","onDelete","_c","canUpdate","canCreate","canDelete","canDeleteParent","maxDepth","hasChildren","depth","log","TreeContainer","dragId","setDefaultOptions","wrapper","defaultFn","beforeFn","afterFn","action","newParent","before","after","opts","tslib_1.__assign","parentId","Number","MAX_SAFE_INTEGER","multipleRoots","logging","editable","placeholder","find","tId","partialTree","found","tree","some","deleteTreeItem","findChildren","forEach","ti","curDepth","pId","onCreate","onBeforeCreate","createTreeItem","w","parent_1","d","onBeforeDelete","onUpdate","_","__","updatedTreeItem","onBeforeUpdate","isSelected","computeDropLocation","target","top","height","y","clientY","deltaZone","convertId","cid","dndTreeItems","dataTransfer","sourceId","getData","targetId","findId","tiSource","tiTarget","isValidTarget","dropLocation","filter","ondrop","findParent","classList","remove","isDragging","sourceIndex","targetIndex","newIndex","max","ondragover","add","ondragleave","ondragstart","setData","effectAllowed","_find","_deleteItem","_createItem","isOpened","el","parentElement","setTopWidth","clientWidth","treeOptions"],"mappings":"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","file":"app.f6c559f6.js","sourceRoot":"..\\packages\\example","sourcesContent":["function Vnode(tag, key, attrs0, children0, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children0, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function(input) {\n\tvar children0 = []\n\tfor (var i = 0; i < input.length; i++) {\n\t\tchildren0[i] = Vnode.normalize(input[i])\n\t}\n\treturn children0\n}\n// Call via `hyperscriptVnode0.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript0` and `fragment` factories and define this as\n// `hyperscriptVnode0(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// var hyperscriptVnode = function(attrs1, ...children1) {\n//     if (attrs1 == null || typeof attrs1 === \"object\" && attrs1.tag == null && !Array.isArray(attrs1)) {\n//         if (children1.length === 1 && Array.isArray(children1[0])) children1 = children1[0]\n//     } else {\n//         children1 = children1.length === 0 && Array.isArray(attrs1) ? attrs1 : [attrs1, ...children1]\n//         attrs1 = undefined\n//     }\n//\n//     if (attrs1 == null) attrs1 = {}\n//     return Vnode(\"\", attrs1.key, attrs1, children1)\n// }\nvar hyperscriptVnode = function() {\n\tvar attrs1 = arguments[this], start = this + 1, children1\n\tif (attrs1 == null) {\n\t\tattrs1 = {}\n\t} else if (typeof attrs1 !== \"object\" || attrs1.tag != null || Array.isArray(attrs1)) {\n\t\tattrs1 = {}\n\t\tstart = this\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren1 = arguments[start]\n\t\tif (!Array.isArray(children1)) children1 = [children1]\n\t} else {\n\t\tchildren1 = []\n\t\twhile (start < arguments.length) children1.push(arguments[start++])\n\t}\n\treturn Vnode(\"\", attrs1.key, attrs1, children1)\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar children = Vnode.normalizeChildren(vnode.children)\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\tvnode.tag = state.tag\n\tvnode.attrs = null\n\tvnode.children = undefined\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\tif (hasClass) attrs.class = null\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\tvnode.text = children[0].children\n\t} else {\n\t\tvnode.children = children\n\t}\n\treturn vnode\n}\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\t\n\tvnode.tag = selector\n\treturn vnode\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function() {\n\tvar vnode2 = hyperscriptVnode.apply(0, arguments)\n\tvnode2.tag = \"[\"\n\tvnode2.children = Vnode.normalizeChildren(vnode2.children)\n\treturn vnode2\n}\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.prototype.finally = function(callback) {\n\treturn this.then(\n\t\tfunction(value) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn value\n\t\t\t})\n\t\t},\n\t\tfunction(reason) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn PromisePolyfill.reject(reason);\n\t\t\t})\n\t\t}\n\t)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") {\n\t\twindow.Promise = PromisePolyfill\n\t} else if (!window.Promise.prototype.finally) {\n\t\twindow.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") {\n\t\tglobal.Promise = PromisePolyfill\n\t} else if (!global.Promise.prototype.finally) {\n\t\tglobal.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar _12 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction makeRequest(factory) {\n\t\treturn function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\t\tfactory(url, args, function (data) {\n\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tdata[i] = new args.type(data[i])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse data = new args.type(data)\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data)\n\t\t\t\t}, reject)\n\t\t\t})\n\t\t\tif (args.background === true) return promise0\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\t\t\treturn wrap(promise0)\n\t\t\tfunction wrap(promise0) {\n\t\t\t\tvar then0 = promise0.then\n\t\t\t\tpromise0.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise0\n\t\t\t}\n\t\t}\n\t}\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif ({}.hasOwnProperty.call(args.headers, key) && name.test(key)) return true\n\t\t}\n\t\treturn false\n\t}\n\tfunction interpolate(url, data, assemble) {\n\t\tif (data == null) return url\n\t\turl = url.replace(/:([^\\/]+)/gi, function (m0, key) {\n\t\t\treturn data[key] != null ? data[key] : m0\n\t\t})\n\t\tif (assemble && data != null) {\n\t\t\tvar querystring = buildQueryString(data)\n\t\t\tif (querystring) url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + querystring\n\t\t}\n\t\treturn url\n\t}\n\treturn {\n\t\trequest: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar useBody = method !== \"GET\" && method !== \"TRACE\" &&\n\t\t\t\t(typeof args.useBody !== \"boolean\" || args.useBody)\n\t\t\tvar data = args.data\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(data instanceof $window.FormData)\n\t\t\tif (useBody) {\n\t\t\t\tif (typeof args.serialize === \"function\") data = args.serialize(data)\n\t\t\t\telse if (!(data instanceof $window.FormData)) data = JSON.stringify(data)\n\t\t\t}\n\t\t\tvar xhr = new $window.XMLHttpRequest(),\n\t\t\t\taborted = false,\n\t\t\t\t_abort = xhr.abort\n\t\t\txhr.abort = function abort() {\n\t\t\t\taborted = true\n\t\t\t\t_abort.call(xhr)\n\t\t\t}\n\t\t\txhr.open(method, interpolate(url, args.data, !useBody), typeof args.async !== \"boolean\" || args.async, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (assumeJSON && useBody && !hasHeader(args, /^content-type0$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, /^accept$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\tif (args.responseType) xhr.responseType = args.responseType\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif(aborted) return\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\tvar response = xhr.responseText\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(xhr, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttry {response = response ? JSON.parse(response) : null}\n\t\t\t\t\t\t\tcatch (e) {throw new Error(\"Invalid JSON: \" + response)}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) resolve(response)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\terror.code = xhr.status\n\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && data != null) xhr.send(data)\n\t\t\telse xhr.send()\n\t\t}),\n\t\tjsonp: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(data)\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\turl = interpolate(url, args.data, true)\n\t\t\tscript.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") +\n\t\t\t\tencodeURIComponent(args.callbackKey || \"callback\") + \"=\" +\n\t\t\t\tencodeURIComponent(callbackName)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t}),\n\t\tsetCompletionCallback: function(callback) {\n\t\t\toncompletion = callback\n\t\t},\n\t}\n}\nvar requestService = _12(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tvar redraw0\n\tfunction setRedraw(callback) {return redraw0 = callback}\n\tfunction getNameSpace(vnode3) {\n\t\treturn vnode3.attrs && vnode3.attrs.xmlns || nameSpace[vnode3.tag]\n\t}\n\t//sanity check to discourage people from doing `vnode3.state = ...`\n\tfunction checkState(vnode3, original) {\n\t\tif (vnode3.state !== original) throw new Error(\"`vnode.state` must not be modified\")\n\t}\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode3` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode3) {\n\t\tvar original = vnode3.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode3, original)\n\t\t}\n\t}\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error1, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode3 = vnodes[i]\n\t\t\tif (vnode3 != null) {\n\t\t\t\tcreateNode(parent, vnode3, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar tag = vnode3.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode3.state = {}\n\t\t\tif (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode3, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode3, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode3, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode3, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode3, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode3, nextSibling) {\n\t\tvnode3.dom = $doc.createTextNode(vnode3.children)\n\t\tinsertNode(parent, vnode3.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode3, ns, nextSibling) {\n\t\tvar match0 = vnode3.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match0[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode3.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode3.children\n\t\t}\n\t\tvnode3.dom = temp.firstChild\n\t\tvnode3.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode3.children != null) {\n\t\t\tvar children3 = vnode3.children\n\t\t\tcreateNodes(fragment, children3, 0, children3.length, hooks, null, ns)\n\t\t}\n\t\tvnode3.dom = fragment.firstChild\n\t\tvnode3.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar tag = vnode3.tag\n\t\tvar attrs2 = vnode3.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode3) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode3.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode3, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (attrs2 != null && attrs2.contenteditable != null) {\n\t\t\tsetContentEditable(vnode3)\n\t\t}\n\t\telse {\n\t\t\tif (vnode3.text != null) {\n\t\t\t\tif (vnode3.text !== \"\") element.textContent = vnode3.text\n\t\t\t\telse vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode3.children != null) {\n\t\t\t\tvar children3 = vnode3.children\n\t\t\t\tcreateNodes(element, children3, 0, children3.length, hooks, null, ns)\n\t\t\t\tif (vnode3.tag === \"select\" && attrs2 != null) setLateSelectAttrs(vnode3, attrs2)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode3, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode3.tag.view === \"function\") {\n\t\t\tvnode3.state = Object.create(vnode3.tag)\n\t\t\tsentinel = vnode3.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode3.state = void 0\n\t\t\tsentinel = vnode3.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode3.state = (vnode3.tag.prototype != null && typeof vnode3.tag.prototype.view === \"function\") ? new vnode3.tag(vnode3) : vnode3.tag(vnode3)\n\t\t}\n\t\tinitLifecycle(vnode3.state, vnode3, hooks)\n\t\tif (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks)\n\t\tvnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3))\n\t\tif (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode3, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode3, hooks)\n\t\tif (vnode3.instance != null) {\n\t\t\tcreateNode(parent, vnode3.instance, hooks, ns, nextSibling)\n\t\t\tvnode3.dom = vnode3.instance.dom\n\t\t\tvnode3.domSize = vnode3.dom != null ? vnode3.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode3.domSize = 0\n\t\t}\n\t}\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next0 DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match0 nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index0 (for the old list), then1 iterate\n\t// over the new list and for each new vnode3, find the corresponding vnode3 in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match0 the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next0 sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index0, the DOM nodes up to the previous\n\t// vnode3 reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next0 sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next0 sibling (cached in the `nextSibling` variable).\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs0 because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\t//\n\t// The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n\t// like #1791 and #1999. We need to be smarter about those situations where adjascent old\n\t// nodes remain together in the new list in a way that isn't covered by parts one and\n\t// three of the diff algo.\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(old, 0, old.length)\n\t\telse {\n\t\t\tvar start = 0, oldStart = 0, isOldKeyed = null, isKeyed = null\n\t\t\tfor (; oldStart < old.length; oldStart++) {\n\t\t\t\tif (old[oldStart] != null) {\n\t\t\t\t\tisOldKeyed = old[oldStart].key != null\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (; start < vnodes.length; start++) {\n\t\t\t\tif (vnodes[start] != null) {\n\t\t\t\t\tisKeyed = vnodes[start].key != null\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isKeyed === null && isOldKeyed == null) return // both lists are full of nulls\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index0 past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index0 on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe == null) oldEnd--\n\t\t\t\t\telse if (ve == null) end--\n\t\t\t\t\telse if (oe.key === ve.key) {\n\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\toldEnd--, end--\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o == null) oldStart++\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\toldStart++, start++\n\t\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (o == null) oldStart++\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (oe == null) oldEnd--\n\t\t\t\t\telse if (ve == null) end--\n\t\t\t\t\telse if (start === end) break\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\t\tinsertNode(parent, toFragment(oe), topSibling)\n\t\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\t\tif (++start <= --end) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\t}\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe == null) oldEnd--\n\t\t\t\t\telse if (ve == null) end--\n\t\t\t\t\telse if (oe.key === ve.key) {\n\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\toldEnd--, end--\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tif (ve != null) {\n\t\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse insertNode(parent, toFragment(v), nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode3.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode3.state = old.state\n\t\t\tvnode3.events = old.events\n\t\t\tif (shouldNotUpdate(vnode3, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode3.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode3.attrs, vnode3, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode3); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode3, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode3, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode3, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode3, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old)\n\t\t\tcreateNode(parent, vnode3, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode3) {\n\t\tif (old.children.toString() !== vnode3.children.toString()) {\n\t\t\told.dom.nodeValue = vnode3.children\n\t\t}\n\t\tvnode3.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode3, ns, nextSibling) {\n\t\tif (old.children !== vnode3.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode3, ns, nextSibling)\n\t\t}\n\t\telse vnode3.dom = old.dom, vnode3.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode3.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children3 = vnode3.children\n\t\tvnode3.dom = null\n\t\tif (children3 != null) {\n\t\t\tfor (var i = 0; i < children3.length; i++) {\n\t\t\t\tvar child = children3[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode3.dom == null) vnode3.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode3.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode3, hooks, ns) {\n\t\tvar element = vnode3.dom = old.dom\n\t\tns = getNameSpace(vnode3) || ns\n\t\tif (vnode3.tag === \"textarea\") {\n\t\t\tif (vnode3.attrs == null) vnode3.attrs = {}\n\t\t\tif (vnode3.text != null) {\n\t\t\t\tvnode3.attrs.value = vnode3.text //FIXME handle0 multiple children3\n\t\t\t\tvnode3.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode3, old.attrs, vnode3.attrs, ns)\n\t\tif (vnode3.attrs != null && vnode3.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode3)\n\t\t}\n\t\telse if (old.text != null && vnode3.text != null && vnode3.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode3.text.toString()) old.dom.firstChild.nodeValue = vnode3.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode3.text != null) vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode3.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tvnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3))\n\t\tif (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode3.state, vnode3, hooks)\n\t\tif (vnode3.attrs != null) updateLifecycle(vnode3.attrs, vnode3, hooks)\n\t\tif (vnode3.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode3.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode3.instance, hooks, nextSibling, ns)\n\t\t\tvnode3.dom = vnode3.instance.dom\n\t\t\tvnode3.domSize = vnode3.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance)\n\t\t\tvnode3.dom = undefined\n\t\t\tvnode3.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode3.dom = old.dom\n\t\t\tvnode3.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode3 = vnodes[start]\n\t\t\tif (vnode3 != null) {\n\t\t\t\tvar key = vnode3.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequece\n\tfunction makeLisIndices(a) {\n\t\tvar p = a.slice()\n\t\tvar result = []\n\t\tresult.push(0)\n\t\tvar u\n\t\tvar v\n\t\tfor (var i = 0, il = a.length; i < il; ++i) {\n\t\t\tif (a[i] === -1) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\tvar c = ((u + v) / 2) | 0 // eslint-disable-line no-bitwise\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) {\n\t\t\t\t\tp[i] = result[u - 1]\n\t\t\t\t}\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = p[v]\n\t\t}\n\t\treturn result\n\t}\n\tfunction toFragment(vnode3) {\n\t\tvar count0 = vnode3.domSize\n\t\tif (count0 != null || vnode3.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode3.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode3.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode3) {\n\t\tvar children3 = vnode3.children\n\t\tif (children3 != null && children3.length === 1 && children3[0].tag === \"<\") {\n\t\t\tvar content = children3[0].children\n\t\t\tif (vnode3.dom.innerHTML !== content) vnode3.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode3.text != null || children3 != null && children3.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode3 = vnodes[i]\n\t\t\tif (vnode3 != null) removeNode(vnode3)\n\t\t}\n\t}\n\tfunction removeNode(vnode3) {\n\t\tvar expected = 1, called = 0\n\t\tvar original = vnode3.state\n\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode3.state.onbeforeremove, vnode3)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (vnode3.attrs && typeof vnode3.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode3.attrs.onbeforeremove, vnode3)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tcheckState(vnode3, original)\n\t\t\t\tonremove(vnode3)\n\t\t\t\tif (vnode3.dom) {\n\t\t\t\t\tvar parent = vnode3.dom.parentNode\n\t\t\t\t\tvar count0 = vnode3.domSize || 1\n\t\t\t\t\twhile (--count0) parent.removeChild(vnode3.dom.nextSibling)\n\t\t\t\t\tparent.removeChild(vnode3.dom)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction onremove(vnode3) {\n\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onremove === \"function\") callHook.call(vnode3.state.onremove, vnode3)\n\t\tif (vnode3.attrs && typeof vnode3.attrs.onremove === \"function\") callHook.call(vnode3.attrs.onremove, vnode3)\n\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\tif (vnode3.instance != null) onremove(vnode3.instance)\n\t\t} else {\n\t\t\tvar children3 = vnode3.children\n\t\t\tif (Array.isArray(children3)) {\n\t\t\t\tfor (var i = 0; i < children3.length; i++) {\n\t\t\t\t\tvar child = children3[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode3, attrs2, ns) {\n\t\tfor (var key in attrs2) {\n\t\t\tsetAttr(vnode3, key, null, attrs2[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode3, key, old, value, ns) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode3, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode3, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode3.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode3.dom, old, value)\n\t\telse if (hasPropertyKey(vnode3, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode3.tag === \"input\" || vnode3.tag === \"textarea\") && vnode3.dom.value === \"\" + value && vnode3.dom === activeElement()) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode3.tag === \"select\" && old !== null && vnode3.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode3.tag === \"option\" && old !== null && vnode3.dom.value === \"\" + value) return\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error1 will occur.\n\t\t\tif (vnode3.tag === \"input\" && key === \"type\") vnode3.dom.setAttribute(key, value)\n\t\t\telse vnode3.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode3.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode3.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode3.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode3, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode3, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode3.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode3, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode3.tag === \"option\"\n\t\t\t\t|| vnode3.tag === \"select\" && vnode3.dom.selectedIndex === -1 && vnode3.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode3.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode3.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode3.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode3, attrs2) {\n\t\tif (\"value\" in attrs2) {\n\t\t\tif(attrs2.value === null) {\n\t\t\t\tif (vnode3.dom.selectedIndex !== -1) vnode3.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs2.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode3.dom.value !== normalized || vnode3.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode3.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode3, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode3, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key in attrs2) {\n\t\t\t\tsetAttr(vnode3, key, old && old[key], attrs2[key], ns)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs2 == null || attrs2[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode3, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode3, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode3.dom === activeElement() || vnode3.tag === \"option\" && vnode3.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode3, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode3.tag.indexOf(\"-\") > -1 || vnode3.attrs != null && vnode3.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode3.dom\n\t}\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style.cssText = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style.cssText = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method0.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler0 before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler0 = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler0 === \"function\") result = handler0.call(ev.currentTarget, ev)\n\t\telse if (typeof handler0.handleEvent === \"function\") handler0.handleEvent(ev)\n\t\tif (ev.redraw === false) ev.redraw = undefined\n\t\telse if (typeof redraw0 === \"function\") redraw0()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode3, key, value) {\n\t\tif (vnode3.events != null) {\n\t\t\tif (vnode3.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode3.events[key] == null) vnode3.dom.addEventListener(key.slice(2), vnode3.events, false)\n\t\t\t\tvnode3.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode3.events[key] != null) vnode3.dom.removeEventListener(key.slice(2), vnode3.events, false)\n\t\t\t\tvnode3.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode3.events = new EventDict()\n\t\t\tvnode3.dom.addEventListener(key.slice(2), vnode3.events, false)\n\t\t\tvnode3.events[key] = value\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode3, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode3)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode3))\n\t}\n\tfunction updateLifecycle(source, vnode3, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode3))\n\t}\n\tfunction shouldNotUpdate(vnode3, old) {\n\t\tdo {\n\t\t\tif (vnode3.attrs != null && typeof vnode3.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode3.attrs.onbeforeupdate, vnode3, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode3.state.onbeforeupdate, vnode3, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode3.dom = old.dom\n\t\tvnode3.domSize = old.domSize\n\t\tvnode3.instance = old.instance\n\t\treturn true\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time rendering0 into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n\treturn {render: render, setRedraw: setRedraw}\n}\nfunction throttle(callback) {\n\tvar pending = null\n\treturn function() {\n\t\tif (pending === null) {\n\t\t\tpending = requestAnimationFrame(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t})\n\t\t}\n\t}\n}\nvar _15 = function($window, throttleMock) {\n\tvar renderService = coreRenderer($window)\n\tvar callbacks = []\n\tvar rendering = false\n\tfunction subscribe(key, callback) {\n\t\tunsubscribe(key)\n\t\tcallbacks.push(key, callback)\n\t}\n\tfunction unsubscribe(key) {\n\t\tvar index = callbacks.indexOf(key)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n\tfunction sync() {\n\t\tif (rendering) throw new Error(\"Nested m.redraw.sync() call\")\n\t\trendering = true\n\t\tfor (var i = 1; i < callbacks.length; i+=2) try {callbacks[i]()} catch (e) {if (typeof console !== \"undefined\") console.error(e)}\n\t\trendering = false\n\t}\n\tvar redraw = (throttleMock || throttle)(sync)\n\tredraw.sync = sync\n\trenderService.setRedraw(redraw)\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _15(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _20 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\trun0()\n\t}\n}\nm.mount = _20(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data2 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key2 = decodeURIComponent(entry[0])\n\t\tvar value0 = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value0 === \"true\") value0 = true\n\t\telse if (value0 === \"false\") value0 = false\n\t\tvar levels = key2.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data2\n\t\tif (key2.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j0 = 0; j0 < levels.length; j0++) {\n\t\t\tvar level = levels[j0], nextLevel = levels[j0 + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j0 === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key2 = levels.slice(0, j0).join()\n\t\t\t\tif (counters[key2] == null) counters[key2] = 0\n\t\t\t\tlevel = counters[key2]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value0 : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data2\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize(fragment0) {\n\t\tvar data1 = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data1[0] !== \"/\") data1 = \"/\" + data1\n\t\treturn data1\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key1 in queryParams) queryData[key1] = queryParams[key1]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key1 in hashParams) hashData[key1] = hashParams[key1]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize(\"search\").slice(router.prefix.length) + normalize(\"hash\")\n\t\t\tdefault: return normalize(\"pathname\").slice(router.prefix.length) + normalize(\"search\") + normalize(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data1, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data1 != null) {\n\t\t\tfor (var key1 in data1) queryData[key1] = data1[key1]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match1, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data1[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _24 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v0) {return v0}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tfunction run1() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar redraw3 = function() {\n\t\t\trun1()\n\t\t\tredraw3 = redrawService0.redraw\n\t\t}\n\t\tredrawService0.subscribe(root, run1)\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\tredraw3()\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t}\n\troute.set = function(path, data0, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data0, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix) {routeService.prefix = prefix}\n\tvar link = function(options, vnode5) {\n\t\tvnode5.dom.setAttribute(\"href\", routeService.prefix + vnode5.attrs.href)\n\t\tvnode5.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, options)\n\t\t}\n\t}\n\troute.link = function(args0) {\n\t\tif (args0.tag == null) return link.bind(link, args0)\n\t\treturn link({}, args0)\n\t}\n\troute.param = function(key0) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key0 !== \"undefined\") return attrs3[key0]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _24(window, redrawService)\nvar _31 = coreRenderer(window)\nm.render = _31.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"2.0.0-rc.4\"\nm.vnode = Vnode\nm.PromisePolyfill = PromisePolyfill\n\nexport default m\nvar _m = m.m,_trust = m.trust,_fragment = m.fragment,_mount = m.mount,_route = m.route,_render = m.render,_redraw = m.redraw,_request = m.request,_jsonp = m.jsonp,_parseQueryString = m.parseQueryString,_buildQueryString = m.buildQueryString,_version = m.version,_vnode = m.vnode,_PromisePolyfill = m.PromisePolyfill\nexport {_m as m,_trust as trust,_fragment as fragment,_mount as mount,_route as route,_render as render,_redraw as redraw,_request as request,_jsonp as jsonp,_parseQueryString as parseQueryString,_buildQueryString as buildQueryString,_version as version,_vnode as vnode,_PromisePolyfill as PromisePolyfill}","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import m, { FactoryComponent, Attributes } from 'mithril';\nimport { TreeItemAction } from '..';\n\n/**\n * Create a GUID\n * @see https://stackoverflow.com/a/2117523/319711\n *\n * @returns RFC4122 version 4 compliant GUID\n */\nexport const uuid4 = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    // tslint:disable-next-line:no-bitwise\n    const r = (Math.random() * 16) | 0;\n    // tslint:disable-next-line:no-bitwise\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n\n/** Move an item in an array from index to another index */\nexport const move = <T>(arr: T[], from: number, to: number) => arr\n  ? arr.splice(to, 0, arr.splice(from, 1)[0])\n  : undefined;\n\nexport interface ITreeButtonOptions extends Attributes {\n  buttonName: TreeItemAction;\n}\n\nexport const TreeButton: FactoryComponent<ITreeButtonOptions> = () => {\n  const textSymbol = (buttonName: TreeItemAction) => {\n    switch (buttonName) {\n      case 'add_child':\n      case 'create':\n        return '';\n      case 'delete':\n        return '';\n      case 'expand_more':\n        return '';\n      case 'expand_less':\n        return '';\n    }\n  };\n  const classNames = (buttonName: TreeItemAction) => {\n    switch (buttonName) {\n      case 'expand_more':\n      case 'expand_less':\n        return '.mtc__clickable.mtc__collapse-expand-item';\n      default:\n        return '.mtc__act';\n    }\n  };\n  return {\n    view: ({ attrs: { buttonName, ...params } }) => m(`${classNames(buttonName)}`, params, textSymbol(buttonName)),\n  };\n};\n","import m, { FactoryComponent, Attributes } from 'mithril';\nimport { ITreeItem } from './models';\nimport { IInternalTreeOptions } from './models/tree-options';\nimport { TreeButton } from './utils';\n\nexport const TreeItemIdPrefix = 'tree-item-';\n\ninterface ITreeItemAttributes {\n  width: number;\n  item: ITreeItem;\n  options: IInternalTreeOptions;\n  selectedId?: string | number;\n  dragOptions: Attributes;\n}\n\nexport const TreeItem: FactoryComponent<ITreeItemAttributes> = () => {\n  const tiState = {\n    isOpen: false,\n  } as {\n    isOpen: boolean;\n    open: (treeItem: ITreeItem, isExpanded: boolean) => void;\n    toggle: (treeItem: ITreeItem) => void;\n  };\n\n  return {\n    oninit: ({ attrs }) => {\n      const { options } = attrs;\n      const { isOpen, _hasChildren } = options;\n\n      tiState.toggle = (treeItem: ITreeItem) => {\n        if (_hasChildren(treeItem)) {\n          if (isOpen) {\n            treeItem[isOpen] = !treeItem[isOpen];\n          } else {\n            tiState.isOpen = !tiState.isOpen;\n          }\n        }\n      };\n      tiState.open = (treeItem: ITreeItem, isExpanded: boolean) => {\n        if (isExpanded) {\n          return;\n        }\n        if (isOpen) {\n          treeItem[isOpen] = true;\n        } else if (!tiState.isOpen) {\n          tiState.isOpen = true;\n        }\n      };\n    },\n    view: ({ attrs: { item, options, dragOptions, selectedId, width } }) => {\n      const {\n        id,\n        treeItemView,\n        _findChildren,\n        _isExpanded,\n        _addChildren,\n        _hasChildren,\n        _depth,\n        onSelect,\n        onDelete,\n        editable: { canUpdate, canCreate, canDelete, canDeleteParent },\n        maxDepth,\n      } = options;\n      const { toggle, open, isOpen } = tiState;\n      const isExpanded = _isExpanded(item, isOpen);\n      const hasChildren = _hasChildren(item);\n      const depth = _depth(item);\n      return m(\n        `li${canUpdate ? '.mtc__draggable' : ''}[id=${TreeItemIdPrefix}${item[id]}][draggable=${canUpdate}]`,\n        dragOptions,\n        [\n          m(\n            '.mtc__item',\n            {\n              onclick: (ev: MouseEvent) => {\n                ev.stopPropagation();\n                onSelect(item, selectedId !== item[id]);\n              },\n            },\n            [\n              m(\n                '.mtc__header.mtc__clearfix',\n                {\n                  class: `${selectedId === item[id] ? 'active' : ''}`,\n                },\n                [\n                  hasChildren\n                    ? m(TreeButton, {\n                        buttonName: isExpanded ? 'expand_less' : 'expand_more',\n                        onclick: () => toggle(item),\n                      })\n                    : undefined,\n                  m(\n                    '.mtc__item-title',\n                    {\n                      class: `${canUpdate ? 'mtc__moveable' : ''} ${hasChildren ? '' : 'mtc__childless-item'}`,\n                      style: `max-width: ${width}px`,\n                    },\n                    m(treeItemView, { treeItem: item, depth, width })\n                  ),\n                ],\n                m('.mtc__act-group', [\n                  canDelete && (canDeleteParent || !hasChildren)\n                    ? m(TreeButton, { buttonName: 'delete', onclick: () => onDelete(item) })\n                    : '',\n                  canCreate && depth < maxDepth\n                    ? m(TreeButton, {\n                        buttonName: 'add_child',\n                        onclick: () => {\n                          _addChildren(item, width);\n                          open(item, isExpanded);\n                        },\n                      })\n                    : '',\n                ])\n              ),\n              isExpanded\n                ? m('ul.mtc__item-body', [\n                    // ...item[children].map((i: ITreeItem) =>\n                    ..._findChildren(item).map((i: ITreeItem) =>\n                      m(TreeItem, {\n                        width: width - 12,\n                        item: i,\n                        options,\n                        dragOptions,\n                        selectedId,\n                        key: i[id],\n                      })\n                    ),\n                  ])\n                : '',\n            ]\n          ),\n        ]\n      );\n    },\n  };\n};\n","import './styles/tree-container.css';\nimport m, { FactoryComponent, Attributes, VnodeDOM } from 'mithril';\nimport { TreeItem, TreeItemIdPrefix } from './tree-item';\nimport { IInternalTreeOptions } from './models/tree-options';\nimport { ITreeItem, ITreeOptions, TreeItemUpdateAction } from './models';\nimport { uuid4, TreeButton, move } from './utils';\nimport { ITreeState } from './models/tree-state';\n\nexport let log: (...args: any[]) => void = () => undefined;\n\nexport const TreeContainer: FactoryComponent<{ tree: ITreeItem[]; options: Partial<ITreeOptions> }> = () => {\n  const state = {\n    selectedId: '',\n    dragId: '',\n  } as ITreeState;\n\n  const setDefaultOptions = (options: Partial<ITreeOptions>) => {\n    // const { options } = state;\n    const wrapper = (\n      defaultFn: (treeItem: ITreeItem, action?: TreeItemUpdateAction, newParent?: ITreeItem) => void,\n      beforeFn?: (\n        treeItem: ITreeItem,\n        action?: TreeItemUpdateAction,\n        newParent?: ITreeItem\n      ) => boolean | void | Promise<boolean>,\n      afterFn?: (treeItem: ITreeItem, action?: TreeItemUpdateAction, newParent?: ITreeItem) => void | Promise<void>\n    ) => async (treeItem: ITreeItem, action?: TreeItemUpdateAction, newParent?: ITreeItem) => {\n      if (beforeFn) {\n        const before = beforeFn(treeItem, action, newParent);\n        const isAsync = typeof before !== 'boolean';\n        const result = isAsync ? await before : before;\n        if (result === false) {\n          return;\n        }\n      }\n      const r = defaultFn(treeItem, action, newParent);\n      if (typeof r === 'function') {\n        await r;\n      }\n      if (afterFn) {\n        const after = afterFn(treeItem, action, newParent);\n        if (typeof after === 'function') {\n          await after;\n        }\n      }\n    };\n    const opts = {\n      id: 'id',\n      parentId: 'parentId',\n      name: 'name',\n      isOpen: 'isOpen',\n      maxDepth: Number.MAX_SAFE_INTEGER,\n      multipleRoots: true,\n      logging: false,\n      editable: { canCreate: false, canDelete: false, canUpdate: false, canDeleteParent: false },\n      placeholder: 'Create your first item',\n      ...options,\n    } as IInternalTreeOptions;\n\n    if (opts.logging) {\n      log = console.log;\n    }\n    const { id, parentId, name, isOpen } = opts;\n\n    /** Recursively find a tree item */\n    const find = (tId: string | number = '', partialTree = state.tree) => {\n      if (!tId || !partialTree) {\n        return undefined;\n      }\n      let found: ITreeItem | undefined;\n      partialTree.some(treeItem => {\n        if (treeItem[id] === tId) {\n          found = treeItem;\n          return true;\n        }\n        return false;\n      });\n      return found;\n    };\n\n    /** Recursively delete a tree item and all its children */\n    const deleteTreeItem = (tId: string | number = '', partialTree = state.tree) => {\n      if (!tId || !partialTree) {\n        return false;\n      }\n      let found = false;\n      partialTree.some((treeItem, i) => {\n        if (treeItem[id] === tId) {\n          partialTree.splice(i, 1);\n          findChildren(treeItem).forEach(ti => deleteTreeItem(ti[id]));\n          found = true;\n          return true;\n        }\n        return false;\n      });\n      return found;\n    };\n\n    /** Recursively update a tree item and all its children */\n    const updateTreeItem = (updatedTreeItem: ITreeItem, partialTree = state.tree) => {\n      if (!partialTree) {\n        return false;\n      }\n      let found = false;\n      partialTree.some((treeItem, i) => {\n        if (treeItem[id] === updatedTreeItem[id]) {\n          partialTree[i] = updatedTreeItem;\n          found = true;\n          return true;\n        }\n        return false;\n      });\n      return found;\n    };\n\n    const depth = (treeItem: ITreeItem, curDepth = 0): number => {\n      const pId = treeItem[parentId];\n      return pId ? depth(find(pId) as ITreeItem, curDepth + 1) : curDepth;\n    };\n\n    const onCreate = wrapper(\n      (ti: ITreeItem) => {\n        if (state.tree) {\n          state.tree.push(ti);\n        }\n      },\n      opts.onBeforeCreate,\n      (treeItem: ITreeItem) => {\n        onSelect(treeItem, true);\n        opts.onCreate(treeItem);\n      }\n    );\n\n    /** Create a new tree item. */\n    const createTreeItem = (pId: string | number = '', width: number) => {\n      const create = (w: number) => {\n        if (options.create) {\n          const parent = find(pId);\n          const d = parent ? depth(parent) : -1;\n          return options.create(parent, d, w);\n        }\n        const item = {} as ITreeItem;\n        item[id] = uuid4();\n        item[parentId] = pId;\n        item[name] = 'New...';\n        return item;\n      };\n      onCreate(create(width));\n    };\n\n    const onDelete = wrapper((ti: ITreeItem) => deleteTreeItem(ti[id]), opts.onBeforeDelete, opts.onDelete);\n\n    const onUpdate = wrapper(\n      (ti: ITreeItem, _: TreeItemUpdateAction = 'edit', __?: ITreeItem) => updateTreeItem(ti),\n      opts.onBeforeUpdate,\n      opts.onUpdate\n    );\n\n    const onSelect = (ti: ITreeItem, isSelected: boolean) => {\n      state.selectedId = isSelected ? ti[id] : '';\n      if (opts.onSelect) {\n        opts.onSelect(ti, isSelected);\n      }\n    };\n\n    const treeItemView = opts.treeItemView || {\n      view: ({ attrs: { treeItem } }) => treeItem[name],\n    };\n\n    /** The drop location indicates the new position of the dropped element: above, below or as a child */\n    const computeDropLocation = (target: HTMLElement, ev: DragEvent) => {\n      const { top, height } = target.getBoundingClientRect();\n      const y = ev.clientY - top;\n      const deltaZone = height / 3;\n      return y < deltaZone ? 'above' : y < 2 * deltaZone ? 'as_child' : 'below';\n    };\n\n    const convertId = (cid: string | number) => (isNaN(+cid) ? cid : +cid);\n\n    const dndTreeItems = (target: HTMLElement, ev: DragEvent) => {\n      if (ev.dataTransfer) {\n        const sourceId = convertId(ev.dataTransfer.getData('text').replace(TreeItemIdPrefix, ''));\n        const targetId = convertId((findId(target) || '').replace(TreeItemIdPrefix, ''));\n        const tiSource = find(sourceId);\n        const tiTarget = find(targetId);\n        return { tiSource, tiTarget, sourceId, targetId };\n      }\n      return { tiSource: undefined, tiTarget: undefined, sourceId: undefined, targetId: undefined };\n    };\n\n    const isValidTarget = (\n      target: HTMLElement,\n      ev: DragEvent,\n      dropLocation: 'above' | 'below' | 'as_child' = computeDropLocation(target, ev)\n    ) => {\n      const { sourceId, targetId, tiSource, tiTarget } = dndTreeItems(target, ev);\n      const parent = dropLocation === 'as_child' || !tiTarget ? tiTarget : find(tiTarget[parentId]);\n      return (\n        targetId !== sourceId &&\n        (!opts.onBeforeUpdate || (tiSource && opts.onBeforeUpdate(tiSource, 'move', parent) === true))\n      );\n    };\n\n    const dragOpts = {\n      ondrop: (ev: DragEvent) => {\n        if (!ev.dataTransfer || !ev.target) {\n          return false;\n        }\n        const target = ev.target as HTMLElement;\n        const parent = findParent(target);\n        if (!parent) {\n          return;\n        }\n        parent.classList.remove('mtc__above', 'mtc__below', 'mtc__as_child');\n        state.isDragging = false;\n        ev.preventDefault(); // do not open a link\n        const { sourceId, targetId, tiSource, tiTarget } = dndTreeItems(target, ev);\n        const dropLocation = computeDropLocation(parent, ev);\n        if (!isValidTarget(target, ev, dropLocation)) {\n          return false;\n        }\n        log(`Dropping ${sourceId} ${dropLocation} ${targetId}`);\n        if (tiSource && tiTarget) {\n          tiSource[parentId] = tiTarget[dropLocation === 'as_child' ? id : parentId];\n          if (state.tree) {\n            const sourceIndex = state.tree && state.tree.indexOf(tiSource);\n            const targetIndex = state.tree && state.tree.indexOf(tiTarget);\n            const newIndex = Math.max(\n              0,\n              dropLocation === 'above'\n                ? targetIndex - 1\n                : dropLocation === 'below'\n                ? targetIndex + 1\n                : state.tree.length - 1\n            );\n            move(state.tree, sourceIndex, newIndex);\n          }\n          if (dropLocation === 'as_child' && isOpen) {\n            tiTarget[isOpen] = true;\n          }\n          if (opts.onUpdate) {\n            opts.onUpdate(tiSource, 'move', tiTarget);\n          }\n          return true;\n        } else {\n          return false;\n        }\n      },\n      ondragover: (ev: DragEvent) => {\n        (ev as any).redraw = false;\n        const target = ev.target as HTMLElement;\n        const parent = findParent(target);\n        if (parent) {\n          parent.classList.remove('mtc__above', 'mtc__below', 'mtc__as_child');\n          const dropLocation = computeDropLocation(parent, ev);\n          if (isValidTarget(target, ev, dropLocation)) {\n            ev.preventDefault();\n            parent.classList.add('mtc__' + dropLocation);\n            target.style.cursor = isValidTarget(target, ev, dropLocation) ? 'inherit' : 'no_drop';\n          }\n        } else {\n          target.style.cursor = 'no_drop';\n        }\n      },\n      // ondragenter: (ev: DragEvent) => {\n      //   const target = ev.target as HTMLElement;\n      //   const { sourceId, targetId, tiSource, tiTarget } = dndTreeItems(target, ev);\n      //   const disallowDrop =\n      //     targetId === sourceId ||\n      //     (tiSource && opts.onBeforeUpdate && opts.onBeforeUpdate(tiSource, 'move', tiTarget) === false);\n      //   target.style.cursor = disallowDrop ? 'no-drop' : '';\n      // },\n      ondragleave: (ev: DragEvent) => {\n        const target = ev.target as HTMLElement;\n        if (target && target.style) {\n          target.style.cursor = 'inherit';\n        }\n        const parent = findParent(target);\n        if (parent) {\n          parent.classList.remove('mtc__above', 'mtc__below', 'mtc__as_child');\n        }\n      },\n      ondragstart: (ev: DragEvent) => {\n        const target = ev.target;\n        (ev as any).redraw = false;\n        if (target && ev.dataTransfer) {\n          state.isDragging = true;\n          ev.dataTransfer.setData('text', (target as any).id);\n          ev.dataTransfer.effectAllowed = 'move';\n          state.dragId = (target as any).id;\n          log('Drag start: ' + ev.dataTransfer.getData('text'));\n        }\n      },\n    } as Attributes;\n\n    const hasChildren = (treeItem: ITreeItem) => state.tree && state.tree.some(ti => ti[parentId] === treeItem[id]);\n\n    const addChildren = (treeItem: ITreeItem, width: number) => {\n      createTreeItem(treeItem[id], width);\n    };\n\n    const isExpanded = (treeItem: ITreeItem, isOpened: boolean) =>\n      hasChildren(treeItem) && ((isOpen && treeItem[isOpen]) || isOpened);\n\n    const findChildren = (treeItem: ITreeItem) =>\n      state.tree ? state.tree.filter(ti => ti[parentId] === treeItem[id]) : [];\n\n    return {\n      dragOptions: dragOpts,\n      options: {\n        ...opts,\n        treeItemView,\n        onSelect,\n        onCreate,\n        onDelete,\n        onUpdate,\n        _findChildren: findChildren,\n        _find: find,\n        _deleteItem: deleteTreeItem,\n        _createItem: createTreeItem,\n        _hasChildren: hasChildren,\n        _addChildren: addChildren,\n        _depth: depth,\n        _isExpanded: isExpanded,\n      } as IInternalTreeOptions,\n    };\n  };\n\n  /** Find the ID of the first parent element. */\n  const findId = (el: HTMLElement | null): string | null =>\n    el ? (el.id ? el.id : el.parentElement ? findId(el.parentElement) : null) : null;\n\n  /** Find the ID of the first parent element. */\n  const findParent = (el: HTMLElement | null): HTMLElement | null =>\n    el ? (el.id ? el : el.parentElement ? findParent(el.parentElement) : null) : null;\n\n  const setTopWidth:\n    | ((this: {}, vnode: VnodeDOM<{ tree: ITreeItem[]; options: Partial<ITreeOptions> }, {}>) => any)\n    | undefined = ({ dom }) => {\n    state.width = dom.clientWidth - 64;\n  };\n\n  return {\n    oninit: ({ attrs: { options: treeOptions } }) => {\n      const { options, dragOptions } = setDefaultOptions(treeOptions);\n      state.options = options;\n      state.dragOptions = dragOptions;\n      state.parentId = options.parentId;\n    },\n    onupdate: setTopWidth,\n    oncreate: setTopWidth,\n    view: ({ attrs: { tree } }) => {\n      state.tree = tree;\n      const { options, dragOptions, parentId, width } = state;\n      if (!state.tree || !options || !dragOptions) {\n        return undefined;\n      }\n      const {\n        _createItem,\n        placeholder,\n        editable: { canUpdate, canCreate },\n        id,\n        multipleRoots,\n      } = options;\n      const isEmpty = state.tree.length === 0;\n      return m(\n        '.mtc.mtc__container',\n        isEmpty\n          ? m(\n              '.mtc__empty',\n              m(\n                '.mtc__act.mtc__header',\n                {\n                  onclick: () => _createItem(),\n                },\n                [m('div', ''), m('i', placeholder)]\n              )\n            )\n          : m(\n              `[draggable=${canUpdate}]`,\n              { ...dragOptions },\n              m('ul.mtc__branch', [\n                ...state.tree\n                  .filter(item => !item[parentId])\n                  .map(item =>\n                    m(TreeItem, {\n                      item,\n                      width,\n                      options,\n                      dragOptions,\n                      selectedId: state.selectedId,\n                      key: item[id],\n                    })\n                  ),\n                canCreate && multipleRoots\n                  ? m(\n                      'li.mtc__new_root',\n                      m(\n                        '.mtc__item.mtc__clickable',\n                        m('.mtc__indent', m(TreeButton, { buttonName: 'create', onclick: () => _createItem() }))\n                      )\n                    )\n                  : undefined,\n              ])\n            )\n      );\n    },\n  };\n};\n","import m, { Component } from 'mithril';\nimport { TreeContainer, ITreeOptions, ITreeItem, uuid4, ITreeItemViewComponent } from 'mithril-tree-component';\n\ninterface IMyTree extends ITreeItem {\n  id: number | string;\n  parentId: number | string;\n  title: string;\n  description: string;\n}\n\nexport const TreeView = () => {\n  const data: IMyTree[] = [\n    { id: 1, parentId: 0, title: 'My id is 1', description: 'Description of item 1.' },\n    { id: 2, parentId: 1, title: 'My id is 2', description: 'Description of item 2.' },\n    { id: 3, parentId: 1, title: 'My id is 3', description: 'Description of item 3.' },\n    {\n      id: 4,\n      parentId: 2,\n      title: 'I have a very long title which should be displayed using ellipses if everything works as expected',\n      description: 'Description of item 4.',\n    },\n    { id: 5, parentId: 0, title: 'My id is 5 - I am not a drop target', description: 'Items cannot be dropped on me.' },\n    { id: 6, parentId: 0, title: 'My id is 6', description: 'Description of item 6.' },\n    { id: 7, parentId: 0, title: 'My id is 7', description: 'Description of item 7.' },\n    { id: 8, parentId: 4, title: 'My id is 8', description: 'Description of item 8.' },\n  ];\n  const emptyTree: IMyTree[] = [];\n  const tree = data;\n  const options = {\n    logging: true,\n    id: 'id',\n    parentId: 'parentId',\n    isOpen: 'isOpen',\n    name: 'title',\n    onSelect: (ti, isSelected) => console.log(`On ${isSelected ? 'select' : 'unselect'}: ${ti.title}`),\n    onBeforeCreate: ti => console.log(`On before create ${ti.title}`),\n    onCreate: ti => console.log(`On create ${ti.title}`),\n    onBeforeDelete: ti => console.log(`On before delete ${ti.title}`),\n    onDelete: ti => console.log(`On delete ${ti.title}`),\n    onBeforeUpdate: (ti, action, newParent) => {\n      console.log(`On before ${action} update ${ti.title} to ${newParent ? newParent.title : ''}.`);\n      const result = newParent && newParent.id === 5 ? false : true;\n      console.warn(result ? 'Drop allowed' : 'Drop not allowed');\n      return result;\n    },\n    onUpdate: ti => console.log(`On update ${ti.title}`),\n    create: (parent?: IMyTree) => {\n      const item = {} as IMyTree;\n      item.id = uuid4();\n      if (parent) {\n        item.parentId = parent.id;\n      }\n      item.title = `Created at ${new Date().toLocaleTimeString()}`;\n      return item as IMyTree;\n    },\n    editable: { canCreate: false, canDelete: false, canUpdate: false, canDeleteParent: false },\n  } as Partial<ITreeOptions>;\n\n  const optionsCRUD = {\n    ...options,\n    placeholder: 'Create a new tree item',\n    editable: { canCreate: true, canDelete: true, canUpdate: true, canDeleteParent: false },\n  };\n\n  const optionsOwnView = {\n    ...options,\n    maxDepth: 3,\n    treeItemView: {\n      view: ({\n        attrs: {\n          depth,\n          treeItem: { title, description },\n          width,\n        },\n      }) =>\n        m(\n          'div',\n          { style: `max-width: ${width - 32}px` },\n          m('div', { style: 'font-weight: bold; margin-right: 1rem' }, `Depth ${depth}: ${title}`),\n          m('div', { style: 'font-style: italic;' }, description || '...')\n        ),\n    } as Component<ITreeItemViewComponent>,\n  } as ITreeOptions;\n\n  const optionsCRUDisOpen = {\n    ...options,\n    isOpen: undefined,\n    editable: { canCreate: true, canDelete: true, canUpdate: true, canDeleteParent: false },\n  } as ITreeOptions;\n\n  const optionsAsync = {\n    ...options,\n    isOpen: undefined,\n    editable: { canCreate: true, canDelete: true, canUpdate: true, canDeleteParent: false },\n    onBeforeDelete: ti => {\n      return new Promise<boolean>(resolve => {\n        setTimeout(() => {\n          console.log(`On before delete ${ti.title}`);\n          resolve(true);\n        }, 3000);\n      });\n    },\n    onBeforeCreate: ti => {\n      return new Promise<boolean>(resolve => {\n        setTimeout(() => {\n          console.log(`On before create ${ti.title}`);\n          resolve(true);\n        }, 3000);\n      });\n    },\n    onDelete: ti => {\n      console.log(`On delete ${ti.title}`);\n      m.redraw(); // As the delete action is done async, force a redraw when done.\n    },\n    onCreate: ti => {\n      console.log(`On create ${ti.title}`);\n      m.redraw(); // As the delete action is done async, force a redraw when done.\n    },\n  } as ITreeOptions;\n\n  return {\n    view: () => {\n      // console.log('Drawing the view...');\n      return m('.row', [\n        m('.col.s6', [\n          m('h3', 'CRUD'),\n          m(TreeContainer, { tree, options: optionsCRUD }),\n          m('h3', 'Readonly'),\n          m(TreeContainer, { tree, options }),\n          m('h3', 'Own view, maxDepth 3'),\n          m(TreeContainer, { tree, options: optionsOwnView }),\n          m('h3', 'CRUD, isOpen undefined'),\n          m(TreeContainer, { tree, options: optionsCRUDisOpen }),\n          m('h3', 'CRUD, async. create and delete'),\n          m(TreeContainer, { tree, options: optionsAsync }),\n          m('h3', 'CRUD, empty tree'),\n          m(TreeContainer, { tree: emptyTree, options: optionsCRUD }),\n        ]),\n        m('.col.s6', [\n          m(\n            'button.waves-effect.waves-light.btn',\n            {\n              onclick: () => {\n                setTimeout(() => {\n                  data[0].title = `Updated at ${new Date().toTimeString()}`;\n                  m.redraw();\n                }, 1000);\n              },\n            },\n            'Update first node with timeout'\n          ),\n          m('h3', 'Tree data'),\n          m('pre', m('code', JSON.stringify(tree, null, 2))),\n        ]),\n      ]);\n    },\n  };\n};\n","import m, { Vnode } from 'mithril';\n\nexport const Layout = () => ({\n  view: (vnode: Vnode) =>\n    m('container', [\n      m(\n        'nav',\n        m('.nav-wrapper', [\n          m(\n            'a.brand-logo',\n            { style: 'margin-left: 20px' },\n            m('span', { style: 'margin-top: 10px; margin-left: -10px;' }, 'MITHRIL TREE COMPONENT')\n          ),\n        ])\n      ),\n      m('section.main', vnode.children),\n    ]),\n});\n","import 'materialize-css/dist/css/materialize.min.css';\nimport './styles.css';\nimport m, { RouteDefs } from 'mithril';\nimport { TreeView } from './components/tree-view';\nimport { Layout } from './components/layout';\n\nconst routingTable: RouteDefs = {\n  '/': {\n    render: () => m(Layout, m(TreeView)),\n  },\n};\n\nm.route(document.body, '/', routingTable);\n"]}