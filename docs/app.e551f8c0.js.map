{"version":3,"sources":["node_modules/mithril/render/vnode.js","node_modules/mithril/render/hyperscriptVnode.js","node_modules/mithril/render/hyperscript.js","node_modules/mithril/render/trust.js","node_modules/mithril/render/fragment.js","node_modules/mithril/hyperscript.js","node_modules/mithril/promise/polyfill.js","node_modules/mithril/promise/promise.js","node_modules/mithril/querystring/build.js","node_modules/mithril/pathname/assign.js","node_modules/mithril/pathname/build.js","node_modules/mithril/request/request.js","node_modules/mithril/request.js","node_modules/mithril/render/render.js","node_modules/mithril/api/redraw.js","node_modules/mithril/redraw.js","node_modules/mithril/api/mount.js","node_modules/mithril/mount.js","node_modules/mithril/querystring/parse.js","node_modules/mithril/pathname/parse.js","node_modules/mithril/pathname/compileTemplate.js","node_modules/mithril/router/router.js","node_modules/mithril/api/router.js","node_modules/mithril/route.js","node_modules/mithril/render.js","node_modules/mithril/package.json","node_modules/mithril/index.js","../node_modules/.registry.npmjs.org/style-inject/0.3.0/node_modules/style-inject/dist/style-inject.es.js","../src/utils/utils.ts","../src/tree-item.ts","../src/tree-container.ts","src/components/tree-view.ts","src/components/layout.ts","src/app.ts"],"names":["css","uuid4","replace","c","r","Math","random","toString","move","arr","from","to","splice","TreeButton","view","_a","_b","buttonName","params","m","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TreeItemIdPrefix","TreeItem","tiState","isOpen","oninit","options","_hasChildren","toggle","treeItem","open","isExpanded","item","dragOptions","selectedId","width","id","treeItemView","_findChildren","_isExpanded","_addChildren","_depth","onSelect","onDelete","_c","canUpdate","canCreate","canDelete","canDeleteParent","maxDepth","hasChildren","depth","onclick","ev","stopPropagation","class","map","i","key","log","TreeContainer","state","dragId","setDefaultOptions","wrapper","defaultFn","beforeFn","afterFn","action","newParent","before","after","opts","tslib_1.__assign","parentId","name","Number","MAX_SAFE_INTEGER","multipleRoots","logging","editable","placeholder","console","find","tId","partialTree","found","tree","some","deleteTreeItem","findChildren","forEach","ti","curDepth","pId","onCreate","push","onBeforeCreate","createTreeItem","w","create","parent_1","d","onBeforeDelete","onUpdate","_","__","updatedTreeItem","onBeforeUpdate","isSelected","computeDropLocation","target","top","height","y","clientY","deltaZone","convertId","cid","isNaN","dndTreeItems","dataTransfer","sourceId","getData","targetId","findId","tiSource","tiTarget","isValidTarget","dropLocation","parent","filter","ondrop","findParent","classList","remove","isDragging","preventDefault","sourceIndex","indexOf","targetIndex","newIndex","max","length","ondragover","redraw","add","cursor","ondragleave","ondragstart","setData","effectAllowed","_find","_deleteItem","_createItem","isOpened","el","parentElement","setTopWidth","dom","clientWidth","treeOptions","onupdate","oncreate","isEmpty","fragment"],"mappings":"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","file":"app.e551f8c0.js","sourceRoot":"..\\packages\\example","sourcesContent":["\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tfor (var i = 0; i < input.length; i++) {\n\t\tchildren[i] = Vnode.normalize(input[i])\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n\tvar attrs = arguments[this], start = this + 1, children\n\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = this\n\t}\n\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\n\treturn Vnode(\"\", attrs.key, attrs, children)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\n\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar children = Vnode.normalizeChildren(vnode.children)\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tvnode.tag = state.tag\n\tvnode.attrs = null\n\tvnode.children = undefined\n\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\n\t\tattrs = newAttrs\n\t}\n\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\n\tif (hasClass) attrs.class = null\n\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\tvnode.text = children[0].children\n\t} else {\n\t\tvnode.children = children\n\t}\n\n\treturn vnode\n}\n\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function() {\n\tvar vnode = hyperscriptVnode.apply(0, arguments)\n\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n","\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n","\"use strict\"\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.prototype.finally = function(callback) {\n\treturn this.then(\n\t\tfunction(value) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn value\n\t\t\t})\n\t\t},\n\t\tfunction(reason) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn PromisePolyfill.reject(reason);\n\t\t\t})\n\t\t}\n\t)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\n\nmodule.exports = PromisePolyfill\n","\"use strict\"\n\nvar PromisePolyfill = require(\"./polyfill\")\n\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") {\n\t\twindow.Promise = PromisePolyfill\n\t} else if (!window.Promise.prototype.finally) {\n\t\twindow.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tmodule.exports = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") {\n\t\tglobal.Promise = PromisePolyfill\n\t} else if (!global.Promise.prototype.finally) {\n\t\tglobal.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tmodule.exports = global.Promise\n} else {\n\tmodule.exports = PromisePolyfill\n}\n","\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n","\"use strict\"\n\nmodule.exports = Object.assign || function(target, source) {\n\tif(source) Object.keys(source).forEach(function(key) { target[key] = source[key] })\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\nvar assign = require(\"./assign\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names *must* be separated\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tassign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n","\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\n\nmodule.exports = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction makeRequest(factory) {\n\t\treturn function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\t\tfactory(buildPathname(url, args.params), args, function (data) {\n\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tdata[i] = new args.type(data[i])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse data = new args.type(data)\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data)\n\t\t\t\t}, reject)\n\t\t\t})\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif ({}.hasOwnProperty.call(args.headers, key) && name.test(key)) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, /^content-type$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, /^accept$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") response = JSON.parse(ev.target.responseText)\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) resolve(response)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t}),\n\t\tjsonp: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(data)\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t}\n\t\t\tscript.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") +\n\t\t\t\tencodeURIComponent(args.callbackKey || \"callback\") + \"=\" +\n\t\t\t\tencodeURIComponent(callbackName)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t}),\n\t\tsetCompletionCallback: function(callback) {\n\t\t\toncompletion = callback\n\t\t},\n\t}\n}\n","\"use strict\"\n\nvar PromisePolyfill = require(\"./promise/promise\")\nmodule.exports = require(\"./request/request\")(window, PromisePolyfill)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function($window) {\n\tvar $doc = $window.document\n\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tvar redraw\n\tfunction setRedraw(callback) {return redraw = callback}\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"`vnode.state` must not be modified\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\tfunction validateKeys(vnodes, isKeyed) {\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < vnodes.length; i++) {\n\t\t\tif ((vnodes[i] != null && vnodes[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\"Vnodes must either always have keys or never have keys!\")\n\t\t\t}\n\t\t}\n\t}\n\t//create\n\tfunction createNodesChecked(parent, vnodes, hooks, nextSibling, ns) {\n\t\tif (vnodes.length) {\n\t\t\tvalidateKeys(vnodes, vnodes[0] != null && vnodes[0].key != null)\n\t\t\tcreateNodesUnchecked(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\t}\n\t}\n\tfunction createNodesUnchecked(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodesChecked(fragment, children, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = attrs && attrs.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertNode(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodesChecked(element, children, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\t//\n\t// The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n\t// like #1791 and #1999. We need to be smarter about those situations where adjascent old\n\t// nodes remain together in the new list in a way that isn't covered by parts one and\n\t// three of the diff algo.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodesChecked(parent, vnodes, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tvalidateKeys(vnodes, isKeyed)\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isKeyed === null && isOldKeyed == null) return // both lists are full of nulls\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(old, oldStart, old.length)\n\t\t\t\tcreateNodesUnchecked(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodesUnchecked(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tinsertNode(parent, toFragment(oe), topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodesUnchecked(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodesUnchecked(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse insertNode(parent, toFragment(v), nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequece\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction toFragment(vnode) {\n\t\tvar count = vnode.domSize\n\t\tif (count != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\n\t//remove\n\tfunction removeNodes(vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(vnode)\n\t\t}\n\t}\n\tfunction removeNode(vnode) {\n\t\tvar expected = 1, called = 0\n\t\tvar original = vnode.state\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.state.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.attrs.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tcheckState(vnode, original)\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar parent = vnode.dom.parentNode\n\t\t\t\t\tvar count = vnode.domSize || 1\n\t\t\t\t\twhile (--count) parent.removeChild(vnode.dom.nextSibling)\n\t\t\t\t\tparent.removeChild(vnode.dom)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value && vnode.dom === activeElement()) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\tif (vnode.tag === \"input\" && key === \"type\") vnode.dom.setAttribute(key, value)\n\t\t\telse vnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\tif (attrs != null) {\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === activeElement() || vnode.tag === \"option\" && vnode.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.attrs != null && vnode.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style.cssText = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style.cssText = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tif (ev.redraw === false) ev.redraw = undefined\n\t\telse if (typeof redraw === \"function\") redraw()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\n\t\t// First time rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\n\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n\n\treturn {render: render, setRedraw: setRedraw}\n}\n","\"use strict\"\n\nvar coreRenderer = require(\"../render/render\")\n\nfunction throttle(callback) {\n\tvar pending = null\n\treturn function() {\n\t\tif (pending === null) {\n\t\t\tpending = requestAnimationFrame(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t})\n\t\t}\n\t}\n}\n\nmodule.exports = function($window, throttleMock) {\n\tvar renderService = coreRenderer($window)\n\tvar subscriptions = []\n\tvar rendering = false\n\n\tfunction run(sub) {\n\t\tvar vnode = sub.c(sub)\n\t\tif (vnode !== sub) renderService.render(sub.k, vnode)\n\t}\n\tfunction subscribe(key, callback, onremove) {\n\t\tvar sub = {k: key, c: callback, r: onremove}\n\t\tunsubscribe(key)\n\t\tsubscriptions.push(sub)\n\t\tvar vnode = sub.c(sub)\n\t\tif (vnode !== sub) renderService.render(sub.k, vnode)\n\t}\n\tfunction unsubscribe(key) {\n\t\tfor (var i = 0; i < subscriptions.length; i++) {\n\t\t\tvar sub = subscriptions[i]\n\t\t\tif (sub.k === key) {\n\t\t\t\tsubscriptions.splice(i, 1)\n\t\t\t\trenderService.render(sub.k, [])\n\t\t\t\tif (typeof sub.r === \"function\") sub.r()\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\tfunction sync() {\n\t\tif (rendering) throw new Error(\"Nested m.redraw.sync() call\")\n\t\trendering = true\n\t\tfor (var i = 0; i < subscriptions.length; i++) {\n\t\t\ttry { run(subscriptions[i]) }\n\t\t\tcatch (e) { if (typeof console !== \"undefined\") console.error(e) }\n\t\t}\n\t\trendering = false\n\t}\n\n\tvar redraw = (throttleMock || throttle)(sync)\n\tredraw.sync = sync\n\trenderService.setRedraw(redraw)\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\n","\"use strict\"\n\nmodule.exports = require(\"./api/redraw\")(window)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(redrawService) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService.unsubscribe(root)\n\t\t} else if (component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t} else {\n\t\t\tredrawService.subscribe(root, function() { return Vnode(component) })\n\t\t}\n\t}\n}\n","\"use strict\"\n\nvar redrawService = require(\"./redraw\")\n\nmodule.exports = require(\"./api/mount\")(redrawService)\n","\"use strict\"\n\n// The extra `data` parameter is for if you want to append to an existing\n// parameters object.\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\tif (isValue) cursor[level] = value\n\t\t\telse if (cursor[level] == null) cursor[level] = isNumber ? [] : {}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data\n}\n","\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t\tif (path.length > 1 && path[path.length - 1] === \"/\") path = path.slice(0, -1)\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n","\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n","\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar assign = require(\"../pathname/assign\")\n\nmodule.exports = function($window) {\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar fireAsync\n\n\treturn {\n\t\tprefix: \"#!\",\n\n\t\tgetPath: function() {\n\t\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t\t// but that's not our problem.\n\t\t\tvar prefix = $window.location.hash\n\t\t\tif (this.prefix[0] !== \"#\") {\n\t\t\t\tprefix = $window.location.search + prefix\n\t\t\t\tif (this.prefix[0] !== \"?\") {\n\t\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t\t}\n\t\t\t}\n\t\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t\t// since the representation is consistently a relatively poorly\n\t\t\t// optimized cons string.\n\t\t\treturn prefix.concat()\n\t\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\t\t\t.slice(this.prefix.length)\n\t\t},\n\n\t\tsetPath: function(path, data, options) {\n\t\t\tpath = buildPathname(path, data)\n\t\t\tif (fireAsync != null) {\n\t\t\t\tfireAsync()\n\t\t\t\tvar state = options ? options.state : null\n\t\t\t\tvar title = options ? options.title : null\n\t\t\t\tif (options && options.replace) $window.history.replaceState(state, title, this.prefix + path)\n\t\t\t\telse $window.history.pushState(state, title, this.prefix + path)\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$window.location.href = this.prefix + path\n\t\t\t}\n\t\t},\n\n\t\tdefineRoutes: function(routes, resolve, reject, defaultRoute, subscribe) {\n\t\t\tvar self = this\n\t\t\tvar compiled = Object.keys(routes).map(function(route) {\n\t\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a `/`\")\n\t\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either `/`, `.`, or `-`\")\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\troute: route,\n\t\t\t\t\tcomponent: routes[route],\n\t\t\t\t\tcheck: compileTemplate(route),\n\t\t\t\t}\n\t\t\t})\n\t\t\tvar unsubscribe, asyncId\n\n\t\t\tfireAsync = null\n\n\t\t\tif (defaultRoute != null) {\n\t\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes\")\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction resolveRoute() {\n\t\t\t\tvar path = self.getPath()\n\t\t\t\tvar data = parsePathname(path)\n\n\t\t\t\tassign(data.params, $window.history.state)\n\n\t\t\t\tfor (var i = 0; i < compiled.length; i++) {\n\t\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\t\tresolve(compiled[i].component, data.params, path, compiled[i].route)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treject(path, data.params)\n\t\t\t}\n\n\t\t\tif (supportsPushState) {\n\t\t\t\tunsubscribe = function() {\n\t\t\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t\t}\n\t\t\t\t$window.addEventListener(\"popstate\", fireAsync = function() {\n\t\t\t\t\tif (asyncId) return\n\t\t\t\t\tasyncId = callAsync(function() {\n\t\t\t\t\t\tasyncId = null\n\t\t\t\t\t\tresolveRoute()\n\t\t\t\t\t})\n\t\t\t\t}, false)\n\t\t\t} else if (this.prefix[0] === \"#\") {\n\t\t\t\tunsubscribe = function() {\n\t\t\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t\t\t}\n\t\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t\t}\n\n\t\t\tsubscribe(unsubscribe)\n\t\t\tresolveRoute()\n\t\t},\n\t}\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar Promise = require(\"../promise/promise\")\nvar coreRouter = require(\"../router/router\")\n\nvar sentinel = {}\n\nmodule.exports = function($window, redrawService) {\n\tvar routeService = coreRouter($window)\n\n\tvar currentResolver = sentinel, component, attrs, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar init = false\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\tfunction run() {\n\t\t\tinit = true\n\t\t\tif (sentinel !== currentResolver) {\n\t\t\t\tvar vnode = Vnode(component, attrs.key, attrs)\n\t\t\t\tif (currentResolver) vnode = currentResolver.render(vnode)\n\t\t\t\treturn vnode\n\t\t\t}\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path, route) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs = params, currentPath = path, lastUpdate = null\n\t\t\t\tcurrentResolver = routeResolver.render ? routeResolver : null\n\t\t\t\tif (init) redrawService.redraw()\n\t\t\t\telse {\n\t\t\t\t\tinit = true\n\t\t\t\t\tredrawService.redraw.sync()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path, route)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, function () { bail(path) })\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail, defaultRoute, function (unsubscribe) {\n\t\t\tredrawService.subscribe(root, function(sub) {\n\t\t\t\tsub.c = run\n\t\t\t\treturn sub\n\t\t\t}, unsubscribe)\n\t\t})\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix) {routeService.prefix = prefix}\n\tvar link = function(options, vnode) {\n\t\tvnode.dom.setAttribute(\"href\", routeService.prefix + vnode.attrs.href)\n\t\tvnode.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, options)\n\t\t}\n\t}\n\troute.link = function(args) {\n\t\tif (args.tag == null) return link.bind(link, args)\n\t\treturn link({}, args)\n\t}\n\troute.param = function(key) {\n\t\tif(typeof attrs !== \"undefined\" && typeof key !== \"undefined\") return attrs[key]\n\t\treturn attrs\n\t}\n\n\treturn route\n}\n","\"use strict\"\n\nvar redrawService = require(\"./redraw\")\n\nmodule.exports = require(\"./api/router\")(window, redrawService)\n","\"use strict\"\n\nmodule.exports = require(\"./render/render\")(window)\n","module.exports={name:\"mithril\",version:\"2.0.0-rc.7\",description:\"A framework for building brilliant applications\",author:\"Leo Horie\",license:\"MIT\",unpkg:\"mithril.min.js\",repository:\"MithrilJS/mithril.js\",scripts:{dev:\"node bundler/cli browser.js -output mithril.js -watch\",build:\"npm run build-browser & npm run build-min\",\"build-browser\":\"node bundler/cli browser.js -output mithril.js\",\"build-min\":\"node bundler/cli browser.js -output mithril.min.js -minify\",precommit:\"lint-staged\",lintdocs:\"node docs/lint\",gendocs:\"node docs/generate\",lint:\"eslint . || true\",\"lint:fix\":\"eslint . --fix\",perf:\"node performance/test-perf.js\",test:\"node ospec/bin/ospec\",posttest:\"npm run lint\",cover:\"istanbul cover --print both ospec/bin/ospec\",release:\"npm version -m 'v%s'\",preversion:\"npm run test\",version:\"npm run build && git add mithril.js mithril.min.js\",postversion:\"git push --follow-tags\"},devDependencies:{\"@alrra/travis-scripts\":\"^3.0.1\",benchmark:\"^2.1.4\",chokidar:\"^2.0.4\",dedent:\"^0.7.0\",eslint:\"^5.13.0\",\"gh-pages\":\"^2.0.1\",istanbul:\"^0.4.5\",\"lint-staged\":\"^8.1.3\",locater:\"^1.3.0\",marked:\"^0.6.2\",pinpoint:\"^1.1.0\",terser:\"^3.16.1\"},bin:{ospec:\"./ospec/bin/ospec\"},\"lint-staged\":{\"*.js\":[\"eslint . --fix\",\"git add\"]},dependencies:{}};","\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\n\nvar requestService = require(\"./request\")\nvar redrawService = require(\"./redraw\")\n\nrequestService.setCompletionCallback(redrawService.redraw)\n\nm.mount = require(\"./mount\")\nm.route = require(\"./route\")\nm.render = require(\"./render\").render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.version = require(\"./package.json\").version\nm.vnode = require(\"./render/vnode\")\nm.PromisePolyfill = require(\"./promise/polyfill\")\n\nmodule.exports = m\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import m, { FactoryComponent, Attributes } from 'mithril';\nimport { TreeItemAction } from '..';\n\n/**\n * Create a GUID\n * @see https://stackoverflow.com/a/2117523/319711\n *\n * @returns RFC4122 version 4 compliant GUID\n */\nexport const uuid4 = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    // tslint:disable-next-line:no-bitwise\n    const r = (Math.random() * 16) | 0;\n    // tslint:disable-next-line:no-bitwise\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n\n/** Move an item in an array from index to another index */\nexport const move = <T>(arr: T[], from: number, to: number) => arr\n  ? arr.splice(to, 0, arr.splice(from, 1)[0])\n  : undefined;\n\nexport interface ITreeButtonOptions extends Attributes {\n  buttonName: TreeItemAction;\n}\n\nexport const TreeButton: FactoryComponent<ITreeButtonOptions> = () => {\n  const textSymbol = (buttonName: TreeItemAction) => {\n    switch (buttonName) {\n      case 'add_child':\n      case 'create':\n        return '✚';\n      case 'delete':\n        return '✖';\n      case 'expand_more':\n        return '▶';\n      case 'expand_less':\n        return '◢';\n    }\n  };\n  const classNames = (buttonName: TreeItemAction) => {\n    switch (buttonName) {\n      case 'expand_more':\n      case 'expand_less':\n        return '.mtc__clickable.mtc__collapse-expand-item';\n      default:\n        return '.mtc__act';\n    }\n  };\n  return {\n    view: ({ attrs: { buttonName, ...params } }) => m(`${classNames(buttonName)}`, params, textSymbol(buttonName)),\n  };\n};\n","import m, { FactoryComponent, Attributes } from 'mithril';\nimport { ITreeItem } from './models';\nimport { IInternalTreeOptions } from './models/tree-options';\nimport { TreeButton } from './utils';\n\nexport const TreeItemIdPrefix = 'tree-item-';\n\ninterface ITreeItemAttributes {\n  width: number;\n  item: ITreeItem;\n  options: IInternalTreeOptions;\n  selectedId?: string | number;\n  dragOptions: Attributes;\n}\n\nexport const TreeItem: FactoryComponent<ITreeItemAttributes> = () => {\n  const tiState = {\n    isOpen: false,\n  } as {\n    isOpen: boolean;\n    open: (treeItem: ITreeItem, isExpanded: boolean) => void;\n    toggle: (treeItem: ITreeItem) => void;\n  };\n\n  return {\n    oninit: ({ attrs }) => {\n      const { options } = attrs;\n      const { isOpen, _hasChildren } = options;\n\n      tiState.toggle = (treeItem: ITreeItem) => {\n        if (_hasChildren(treeItem)) {\n          if (isOpen) {\n            treeItem[isOpen] = !treeItem[isOpen];\n          } else {\n            tiState.isOpen = !tiState.isOpen;\n          }\n        }\n      };\n      tiState.open = (treeItem: ITreeItem, isExpanded: boolean) => {\n        if (isExpanded) {\n          return;\n        }\n        if (isOpen) {\n          treeItem[isOpen] = true;\n        } else if (!tiState.isOpen) {\n          tiState.isOpen = true;\n        }\n      };\n    },\n    view: ({ attrs: { item, options, dragOptions, selectedId, width } }) => {\n      const {\n        id,\n        treeItemView,\n        _findChildren,\n        _isExpanded,\n        _addChildren,\n        _hasChildren,\n        _depth,\n        onSelect,\n        onDelete,\n        editable: { canUpdate, canCreate, canDelete, canDeleteParent },\n        maxDepth,\n      } = options;\n      const { toggle, open, isOpen } = tiState;\n      const isExpanded = _isExpanded(item, isOpen);\n      const hasChildren = _hasChildren(item);\n      const depth = _depth(item);\n      return m(\n        `li${canUpdate ? '.mtc__draggable' : ''}[id=${TreeItemIdPrefix}${item[id]}][draggable=${canUpdate}]`,\n        dragOptions,\n        [\n          m(\n            '.mtc__item',\n            {\n              onclick: (ev: MouseEvent) => {\n                ev.stopPropagation();\n                onSelect(item, selectedId !== item[id]);\n              },\n            },\n            [\n              m(\n                '.mtc__header.mtc__clearfix',\n                {\n                  class: `${selectedId === item[id] ? 'active' : ''}`,\n                },\n                [\n                  hasChildren\n                    ? m(TreeButton, {\n                        buttonName: isExpanded ? 'expand_less' : 'expand_more',\n                        onclick: () => toggle(item),\n                      })\n                    : undefined,\n                  m(\n                    '.mtc__item-title',\n                    {\n                      class: `${canUpdate ? 'mtc__moveable' : ''} ${hasChildren ? '' : 'mtc__childless-item'}`,\n                      style: `max-width: ${width}px`,\n                    },\n                    m(treeItemView, { treeItem: item, depth, width })\n                  ),\n                ],\n                m('.mtc__act-group', [\n                  canDelete && (canDeleteParent || !hasChildren)\n                    ? m(TreeButton, { buttonName: 'delete', onclick: () => onDelete(item) })\n                    : '',\n                  canCreate && depth < maxDepth\n                    ? m(TreeButton, {\n                        buttonName: 'add_child',\n                        onclick: () => {\n                          _addChildren(item, width);\n                          open(item, isExpanded);\n                        },\n                      })\n                    : '',\n                ])\n              ),\n              isExpanded\n                ? m('ul.mtc__item-body', [\n                    // ...item[children].map((i: ITreeItem) =>\n                    ..._findChildren(item).map((i: ITreeItem) =>\n                      m(TreeItem, {\n                        width: width - 12,\n                        item: i,\n                        options,\n                        dragOptions,\n                        selectedId,\n                        key: i[id],\n                      })\n                    ),\n                  ])\n                : '',\n            ]\n          ),\n        ]\n      );\n    },\n  };\n};\n","import './styles/tree-container.css';\nimport m, { FactoryComponent, Attributes, VnodeDOM } from 'mithril';\nimport { TreeItem, TreeItemIdPrefix } from './tree-item';\nimport { IInternalTreeOptions } from './models/tree-options';\nimport { ITreeItem, ITreeOptions, TreeItemUpdateAction } from './models';\nimport { uuid4, TreeButton, move } from './utils';\nimport { ITreeState } from './models/tree-state';\n\nexport let log: (...args: any[]) => void = () => undefined;\n\nexport const TreeContainer: FactoryComponent<{ tree: ITreeItem[]; options: Partial<ITreeOptions> }> = () => {\n  const state = {\n    selectedId: '',\n    dragId: '',\n  } as ITreeState;\n\n  const setDefaultOptions = (options: Partial<ITreeOptions>) => {\n    // const { options } = state;\n    const wrapper = (\n      defaultFn: (treeItem: ITreeItem, action?: TreeItemUpdateAction, newParent?: ITreeItem) => void,\n      beforeFn?: (\n        treeItem: ITreeItem,\n        action?: TreeItemUpdateAction,\n        newParent?: ITreeItem\n      ) => boolean | void | Promise<boolean>,\n      afterFn?: (treeItem: ITreeItem, action?: TreeItemUpdateAction, newParent?: ITreeItem) => void | Promise<void>\n    ) => async (treeItem: ITreeItem, action?: TreeItemUpdateAction, newParent?: ITreeItem) => {\n      if (beforeFn) {\n        const before = beforeFn(treeItem, action, newParent);\n        const isAsync = typeof before !== 'boolean';\n        const result = isAsync ? await before : before;\n        if (result === false) {\n          return;\n        }\n      }\n      const r = defaultFn(treeItem, action, newParent);\n      if (typeof r === 'function') {\n        await r;\n      }\n      if (afterFn) {\n        const after = afterFn(treeItem, action, newParent);\n        if (typeof after === 'function') {\n          await after;\n        }\n      }\n    };\n    const opts = {\n      id: 'id',\n      parentId: 'parentId',\n      name: 'name',\n      isOpen: 'isOpen',\n      maxDepth: Number.MAX_SAFE_INTEGER,\n      multipleRoots: true,\n      logging: false,\n      editable: { canCreate: false, canDelete: false, canUpdate: false, canDeleteParent: false },\n      placeholder: 'Create your first item',\n      ...options,\n    } as IInternalTreeOptions;\n\n    if (opts.logging) {\n      log = console.log;\n    }\n    const { id, parentId, name, isOpen } = opts;\n\n    /** Recursively find a tree item */\n    const find = (tId: string | number = '', partialTree = state.tree) => {\n      if (!tId || !partialTree) {\n        return undefined;\n      }\n      let found: ITreeItem | undefined;\n      partialTree.some(treeItem => {\n        if (treeItem[id] === tId) {\n          found = treeItem;\n          return true;\n        }\n        return false;\n      });\n      return found;\n    };\n\n    /** Recursively delete a tree item and all its children */\n    const deleteTreeItem = (tId: string | number = '', partialTree = state.tree) => {\n      if (!tId || !partialTree) {\n        return false;\n      }\n      let found = false;\n      partialTree.some((treeItem, i) => {\n        if (treeItem[id] === tId) {\n          partialTree.splice(i, 1);\n          findChildren(treeItem).forEach(ti => deleteTreeItem(ti[id]));\n          found = true;\n          return true;\n        }\n        return false;\n      });\n      return found;\n    };\n\n    /** Recursively update a tree item and all its children */\n    const updateTreeItem = (updatedTreeItem: ITreeItem, partialTree = state.tree) => {\n      if (!partialTree) {\n        return false;\n      }\n      let found = false;\n      partialTree.some((treeItem, i) => {\n        if (treeItem[id] === updatedTreeItem[id]) {\n          partialTree[i] = updatedTreeItem;\n          found = true;\n          return true;\n        }\n        return false;\n      });\n      return found;\n    };\n\n    const depth = (treeItem: ITreeItem, curDepth = 0): number => {\n      const pId = treeItem[parentId];\n      return pId ? depth(find(pId) as ITreeItem, curDepth + 1) : curDepth;\n    };\n\n    const onCreate = wrapper(\n      (ti: ITreeItem) => {\n        if (state.tree) {\n          state.tree.push(ti);\n        }\n      },\n      opts.onBeforeCreate,\n      (treeItem: ITreeItem) => {\n        onSelect(treeItem, true);\n        if (opts.onCreate) {\n          opts.onCreate(treeItem);\n        }\n      }\n    );\n\n    /** Create a new tree item. */\n    const createTreeItem = (pId: string | number = '', width: number) => {\n      const create = (w: number) => {\n        if (options.create) {\n          const parent = find(pId);\n          const d = parent ? depth(parent) : -1;\n          return options.create(parent, d, w);\n        }\n        const item = {} as ITreeItem;\n        item[id] = uuid4();\n        item[parentId] = pId;\n        item[name] = 'New...';\n        return item;\n      };\n      onCreate(create(width));\n    };\n\n    const onDelete = wrapper((ti: ITreeItem) => deleteTreeItem(ti[id]), opts.onBeforeDelete, opts.onDelete);\n\n    const onUpdate = wrapper(\n      (ti: ITreeItem, _: TreeItemUpdateAction = 'edit', __?: ITreeItem) => updateTreeItem(ti),\n      opts.onBeforeUpdate,\n      opts.onUpdate\n    );\n\n    const onSelect = (ti: ITreeItem, isSelected: boolean) => {\n      state.selectedId = isSelected ? ti[id] : '';\n      if (opts.onSelect) {\n        opts.onSelect(ti, isSelected);\n      }\n    };\n\n    const treeItemView = opts.treeItemView || {\n      view: ({ attrs: { treeItem } }) => treeItem[name],\n    };\n\n    /** The drop location indicates the new position of the dropped element: above, below or as a child */\n    const computeDropLocation = (target: HTMLElement, ev: DragEvent) => {\n      const { top, height } = target.getBoundingClientRect();\n      const y = ev.clientY - top;\n      const deltaZone = height / 3;\n      return y < deltaZone ? 'above' : y < 2 * deltaZone ? 'as_child' : 'below';\n    };\n\n    const convertId = (cid: string | number) => (isNaN(+cid) ? cid : +cid);\n\n    const dndTreeItems = (target: HTMLElement, ev: DragEvent) => {\n      if (ev.dataTransfer) {\n        const sourceId = convertId(state.dragId || ev.dataTransfer.getData('text').replace(TreeItemIdPrefix, ''));\n        const targetId = convertId((findId(target) || '').replace(TreeItemIdPrefix, ''));\n        const tiSource = find(sourceId);\n        const tiTarget = find(targetId);\n        return { tiSource, tiTarget, sourceId, targetId };\n      }\n      return { tiSource: undefined, tiTarget: undefined, sourceId: undefined, targetId: undefined };\n    };\n\n    const isValidTarget = (\n      target: HTMLElement,\n      ev: DragEvent,\n      dropLocation: 'above' | 'below' | 'as_child' = computeDropLocation(target, ev)\n    ) => {\n      const { sourceId, targetId, tiSource, tiTarget } = dndTreeItems(target, ev);\n      const parent = dropLocation === 'as_child' || !tiTarget ? tiTarget : find(tiTarget[parentId]);\n      return (\n        targetId !== sourceId &&\n        (!opts.onBeforeUpdate || (tiSource && opts.onBeforeUpdate(tiSource, 'move', parent) === true))\n      );\n    };\n\n    const dragOpts = {\n      ondrop: (ev: DragEvent) => {\n        if (!ev.dataTransfer || !ev.target) {\n          return false;\n        }\n        const target = ev.target as HTMLElement;\n        const parent = findParent(target);\n        if (!parent) {\n          return;\n        }\n        parent.classList.remove('mtc__above', 'mtc__below', 'mtc__as_child');\n        state.isDragging = false;\n        ev.preventDefault(); // do not open a link\n        const { sourceId, targetId, tiSource, tiTarget } = dndTreeItems(target, ev);\n        const dropLocation = computeDropLocation(parent, ev);\n        if (!isValidTarget(target, ev, dropLocation)) {\n          return false;\n        }\n        log(`Dropping ${sourceId} ${dropLocation} ${targetId}`);\n        if (tiSource && tiTarget) {\n          tiSource[parentId] = tiTarget[dropLocation === 'as_child' ? id : parentId];\n          if (state.tree) {\n            const sourceIndex = state.tree && state.tree.indexOf(tiSource);\n            const targetIndex = state.tree && state.tree.indexOf(tiTarget);\n            const newIndex = Math.max(\n              0,\n              dropLocation === 'above'\n                ? targetIndex - 1\n                : dropLocation === 'below'\n                ? targetIndex + 1\n                : state.tree.length - 1\n            );\n            move(state.tree, sourceIndex, newIndex);\n          }\n          if (dropLocation === 'as_child' && isOpen) {\n            tiTarget[isOpen] = true;\n          }\n          if (opts.onUpdate) {\n            opts.onUpdate(tiSource, 'move', tiTarget);\n          }\n          return true;\n        } else {\n          return false;\n        }\n      },\n      ondragover: (ev: DragEvent) => {\n        (ev as any).redraw = false;\n        const target = ev.target as HTMLElement;\n        const parent = findParent(target);\n        if (parent) {\n          parent.classList.remove('mtc__above', 'mtc__below', 'mtc__as_child');\n          const dropLocation = computeDropLocation(parent, ev);\n          if (isValidTarget(target, ev, dropLocation)) {\n            ev.preventDefault();\n            parent.classList.add('mtc__' + dropLocation);\n            target.style.cursor = isValidTarget(target, ev, dropLocation) ? 'inherit' : 'no_drop';\n          }\n        } else {\n          target.style.cursor = 'no_drop';\n        }\n      },\n      // ondragenter: (ev: DragEvent) => {\n      //   const target = ev.target as HTMLElement;\n      //   const { sourceId, targetId, tiSource, tiTarget } = dndTreeItems(target, ev);\n      //   const disallowDrop =\n      //     targetId === sourceId ||\n      //     (tiSource && opts.onBeforeUpdate && opts.onBeforeUpdate(tiSource, 'move', tiTarget) === false);\n      //   target.style.cursor = disallowDrop ? 'no-drop' : '';\n      // },\n      ondragleave: (ev: DragEvent) => {\n        const target = ev.target as HTMLElement;\n        if (target && target.style) {\n          target.style.cursor = 'inherit';\n        }\n        const parent = findParent(target);\n        if (parent) {\n          parent.classList.remove('mtc__above', 'mtc__below', 'mtc__as_child');\n        }\n      },\n      ondragstart: (ev: DragEvent) => {\n        const target = ev.target;\n        (ev as any).redraw = false;\n        state.dragId = '';\n        if (target && ev.dataTransfer) {\n          state.isDragging = true;\n          ev.dataTransfer.setData('text', (target as any).id);\n          ev.dataTransfer.effectAllowed = 'move';\n          state.dragId = (target as any).id.replace(TreeItemIdPrefix, '');\n          log('Drag start: ' + ev.dataTransfer.getData('text'));\n        }\n      },\n    } as Attributes;\n\n    const hasChildren = (treeItem: ITreeItem) => state.tree && state.tree.some(ti => ti[parentId] === treeItem[id]);\n\n    const addChildren = (treeItem: ITreeItem, width: number) => {\n      createTreeItem(treeItem[id], width);\n    };\n\n    const isExpanded = (treeItem: ITreeItem, isOpened: boolean) =>\n      hasChildren(treeItem) && ((isOpen && treeItem[isOpen]) || isOpened);\n\n    const findChildren = (treeItem: ITreeItem) =>\n      state.tree ? state.tree.filter(ti => ti[parentId] === treeItem[id]) : [];\n\n    return {\n      dragOptions: dragOpts,\n      options: {\n        ...opts,\n        treeItemView,\n        onSelect,\n        onCreate,\n        onDelete,\n        onUpdate,\n        _findChildren: findChildren,\n        _find: find,\n        _deleteItem: deleteTreeItem,\n        _createItem: createTreeItem,\n        _hasChildren: hasChildren,\n        _addChildren: addChildren,\n        _depth: depth,\n        _isExpanded: isExpanded,\n      } as IInternalTreeOptions,\n    };\n  };\n\n  /** Find the ID of the first parent element. */\n  const findId = (el: HTMLElement | null): string | null =>\n    el ? (el.id ? el.id : el.parentElement ? findId(el.parentElement) : null) : null;\n\n  /** Find the ID of the first parent element. */\n  const findParent = (el: HTMLElement | null): HTMLElement | null =>\n    el ? (el.id ? el : el.parentElement ? findParent(el.parentElement) : null) : null;\n\n  const setTopWidth:\n    | ((this: {}, vnode: VnodeDOM<{ tree: ITreeItem[]; options: Partial<ITreeOptions> }, {}>) => any)\n    | undefined = ({ dom }) => {\n    state.width = dom.clientWidth - 64;\n  };\n\n  return {\n    oninit: ({ attrs: { options: treeOptions } }) => {\n      const { options, dragOptions } = setDefaultOptions(treeOptions);\n      state.options = options;\n      state.dragOptions = dragOptions;\n      state.parentId = options.parentId;\n    },\n    onupdate: setTopWidth,\n    oncreate: setTopWidth,\n    view: ({ attrs: { tree } }) => {\n      state.tree = tree;\n      const { options, dragOptions, parentId, width } = state;\n      if (!state.tree || !options || !dragOptions) {\n        return undefined;\n      }\n      const {\n        _createItem,\n        placeholder,\n        editable: { canUpdate, canCreate },\n        id,\n        multipleRoots,\n      } = options;\n      const isEmpty = state.tree.length === 0;\n      return m(\n        '.mtc.mtc__container',\n        isEmpty\n          ? m(\n              '.mtc__empty',\n              m(\n                '.mtc__act.mtc__header',\n                {\n                  onclick: () => _createItem(),\n                },\n                [m('div', '✚'), m('i', placeholder)]\n              )\n            )\n          : m(\n              `[draggable=${canUpdate}]`,\n              { ...dragOptions },\n              m('ul.mtc__branch', [\n                ...state.tree\n                  .filter(item => !item[parentId])\n                  .map(item =>\n                    m(TreeItem, {\n                      item,\n                      width,\n                      options,\n                      dragOptions,\n                      selectedId: state.selectedId,\n                      key: item[id],\n                    })\n                  ),\n                canCreate && multipleRoots\n                  ? m(\n                      'li.mtc__new_root',\n                      { key: -1 },\n                      m(\n                        '.mtc__item.mtc__clickable',\n                        m('.mtc__indent', m(TreeButton, { buttonName: 'create', onclick: () => _createItem() }))\n                      )\n                    )\n                  : m.fragment({ key: -1 }, ''),\n              ])\n            )\n      );\n    },\n  };\n};\n","import m, { Component } from 'mithril';\nimport { TreeContainer, ITreeOptions, ITreeItem, uuid4, ITreeItemViewComponent } from 'mithril-tree-component';\n\ninterface IMyTree extends ITreeItem {\n  id: number | string;\n  parentId: number | string;\n  title: string;\n  description: string;\n}\n\nexport const TreeView = () => {\n  const data: IMyTree[] = [\n    { id: 1, parentId: 0, title: 'My id is 1', description: 'Description of item 1.' },\n    { id: 2, parentId: 1, title: 'My id is 2', description: 'Description of item 2.' },\n    { id: 3, parentId: 1, title: 'My id is 3', description: 'Description of item 3.' },\n    {\n      id: 4,\n      parentId: 2,\n      title: 'I have a very long title which should be displayed using ellipses if everything works as expected',\n      description: 'Description of item 4.',\n    },\n    { id: 5, parentId: 0, title: 'My id is 5 - I am not a drop target', description: 'Items cannot be dropped on me.' },\n    { id: 6, parentId: 0, title: 'My id is 6', description: 'Description of item 6.' },\n    { id: 7, parentId: 0, title: 'My id is 7', description: 'Description of item 7.' },\n    { id: 8, parentId: 4, title: 'My id is 8', description: 'Description of item 8.' },\n  ];\n  const emptyTree: IMyTree[] = [];\n  const tree = data;\n  const options = {\n    logging: true,\n    id: 'id',\n    parentId: 'parentId',\n    isOpen: 'isOpen',\n    name: 'title',\n    onSelect: (ti, isSelected) => console.log(`On ${isSelected ? 'select' : 'unselect'}: ${ti.title}`),\n    onBeforeCreate: ti => console.log(`On before create ${ti.title}`),\n    onCreate: ti => console.log(`On create ${ti.title}`),\n    onBeforeDelete: ti => console.log(`On before delete ${ti.title}`),\n    onDelete: ti => console.log(`On delete ${ti.title}`),\n    onBeforeUpdate: (ti, action, newParent) => {\n      console.log(`On before ${action} update ${ti.title} to ${newParent ? newParent.title : ''}.`);\n      const result = newParent && newParent.id === 5 ? false : true;\n      console.warn(result ? 'Drop allowed' : 'Drop not allowed');\n      return result;\n    },\n    onUpdate: ti => console.log(`On update ${ti.title}`),\n    create: (parent?: IMyTree) => {\n      const item = {} as IMyTree;\n      item.id = uuid4();\n      if (parent) {\n        item.parentId = parent.id;\n      }\n      item.title = `Created at ${new Date().toLocaleTimeString()}`;\n      return item as IMyTree;\n    },\n    editable: { canCreate: false, canDelete: false, canUpdate: false, canDeleteParent: false },\n  } as Partial<ITreeOptions>;\n\n  const optionsCRUD = {\n    ...options,\n    placeholder: 'Create a new tree item',\n    editable: { canCreate: true, canDelete: true, canUpdate: true, canDeleteParent: false },\n  };\n\n  const optionsOwnView = {\n    ...options,\n    maxDepth: 3,\n    treeItemView: {\n      view: ({\n        attrs: {\n          depth,\n          treeItem: { title, description },\n          width,\n        },\n      }) =>\n        m(\n          'div',\n          { style: `max-width: ${width - 32}px` },\n          m('div', { style: 'font-weight: bold; margin-right: 1rem' }, `Depth ${depth}: ${title}`),\n          m('div', { style: 'font-style: italic;' }, description || '...')\n        ),\n    } as Component<ITreeItemViewComponent>,\n  } as ITreeOptions;\n\n  const optionsCRUDisOpen = {\n    ...options,\n    isOpen: undefined,\n    editable: { canCreate: true, canDelete: true, canUpdate: true, canDeleteParent: false },\n  } as ITreeOptions;\n\n  const optionsAsync = {\n    ...options,\n    isOpen: undefined,\n    editable: { canCreate: true, canDelete: true, canUpdate: true, canDeleteParent: false },\n    onBeforeDelete: ti => {\n      return new Promise<boolean>(resolve => {\n        setTimeout(() => {\n          console.log(`On before delete ${ti.title}`);\n          resolve(true);\n        }, 3000);\n      });\n    },\n    onBeforeCreate: ti => {\n      return new Promise<boolean>(resolve => {\n        setTimeout(() => {\n          console.log(`On before create ${ti.title}`);\n          resolve(true);\n        }, 3000);\n      });\n    },\n    onDelete: ti => {\n      console.log(`On delete ${ti.title}`);\n      m.redraw(); // As the delete action is done async, force a redraw when done.\n    },\n    onCreate: ti => {\n      console.log(`On create ${ti.title}`);\n      m.redraw(); // As the delete action is done async, force a redraw when done.\n    },\n  } as ITreeOptions;\n\n  return {\n    view: () => {\n      // console.log('Drawing the view...');\n      return m('.row', [\n        m('.col.s6', [\n          m('h3', 'CRUD'),\n          m(TreeContainer, { tree, options: optionsCRUD }),\n          m('h3', 'Readonly'),\n          m(TreeContainer, { tree, options }),\n          m('h3', 'Own view, maxDepth 3'),\n          m(TreeContainer, { tree, options: optionsOwnView }),\n          m('h3', 'CRUD, isOpen undefined'),\n          m(TreeContainer, { tree, options: optionsCRUDisOpen }),\n          m('h3', 'CRUD, async. create and delete'),\n          m(TreeContainer, { tree, options: optionsAsync }),\n          m('h3', 'CRUD, empty tree'),\n          m(TreeContainer, { tree: emptyTree, options: optionsCRUD }),\n        ]),\n        m('.col.s6', [\n          m(\n            'button.waves-effect.waves-light.btn',\n            {\n              onclick: () => {\n                setTimeout(() => {\n                  data[0].title = `Updated at ${new Date().toTimeString()}`;\n                  m.redraw();\n                }, 1000);\n              },\n            },\n            'Update first node with timeout'\n          ),\n          m('h3', 'Tree data'),\n          m('pre', m('code', JSON.stringify(tree, null, 2))),\n        ]),\n      ]);\n    },\n  };\n};\n","import m, { Vnode } from 'mithril';\n\nexport const Layout = () => ({\n  view: (vnode: Vnode) =>\n    m('container', [\n      m(\n        'nav',\n        m('.nav-wrapper', [\n          m(\n            'a.brand-logo',\n            { style: 'margin-left: 20px' },\n            m('span', { style: 'margin-top: 10px; margin-left: -10px;' }, 'MITHRIL TREE COMPONENT')\n          ),\n        ])\n      ),\n      m('section.main', vnode.children),\n    ]),\n});\n","import 'materialize-css/dist/css/materialize.min.css';\nimport './styles.css';\nimport m, { RouteDefs } from 'mithril';\nimport { TreeView } from './components/tree-view';\nimport { Layout } from './components/layout';\n\nconst routingTable: RouteDefs = {\n  '/': {\n    render: () => m(Layout, m(TreeView)),\n  },\n};\n\nm.route(document.body, '/', routingTable);\n"]}